"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var cookie = document.querySelector(".cookie");

if (!localStorage.getItem("cookie__zumfa")) {
  cookie.classList.add("active");
}

window.addEventListener("pageshow", function () {
  var inputs = document.querySelectorAll(".input-form");
  inputs.forEach(function (input) {
    return checkForCompletion(input);
  });
});
var tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');

var tooltipList = _toConsumableArray(tooltipTriggerList).map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl);
});

document.querySelector('.cookie__btn').addEventListener("click", function () {
  localStorage.setItem('cookie__zumfa', true);
  cookie.classList.remove("active");
});
var feedbackInputs = document.querySelectorAll(".input-form");
feedbackInputs.forEach(function (input) {
  if (input.type === "tel") {
    input.addEventListener("input", function (e) {
      inputPhone(e);
    });
    input.addEventListener("keydown", function (e) {
      onePhoneKeyDown(e);
    });
  }

  input.addEventListener("blur", function () {
    checkForCompletion(input);
  });
  input.addEventListener("focus", function () {
    input.parentElement.classList.add("active");
  });
});

if (document.getElementById("index")) {
  var items = Array.from(document.querySelectorAll(".hero__item"));
  var imgBlocks = Array.from(document.querySelectorAll(".hero__right-div"));
  items.forEach(function (item, index) {
    item.addEventListener("mouseover", function () {
      items.forEach(function (el) {
        el.classList.remove("active");
      });
      imgBlocks.forEach(function (el) {
        el.classList.remove("active");
      });
      item.classList.add("active");
      imgBlocks[index].classList.add("active");
    });
  });
  var swiperAfterHero = new Swiper(".after-hero__content", {
    slidesPerView: 1,
    spaceBetween: 20,
    pagination: {
      el: ".after-hero__pagination"
    },
    breakpoints: {
      700: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1200: {
        slidesPerView: 3,
        spaceBetween: 20
      }
    }
  });
}

if (document.getElementById("blog")) {
  var elems = document.querySelectorAll(".blog__head-item");
  activeElem(elems);
}

if (document.getElementById("about")) {
  var swiperYear = new Swiper(".about-history__tab-swiper", {
    slidesPerView: "auto",
    spaceBetween: 20,
    freeMode: true,
    watchSlidesProgress: true,
    breakpoints: {
      320: {
        spaceBetween: 20
      },
      768: {
        spaceBetween: 100
      }
    }
  });
  var swiperHistory = new Swiper(".about-history__bottom-swiper", {
    spaceBetween: 10,
    allowTouchMove: false,
    effect: "fade",
    thumbs: {
      swiper: swiperYear
    },
    navigation: {
      nextEl: ".about-history__btn-next",
      prevEl: ".about-history__btn-prev"
    }
  });
}

if (document.getElementById("details-product")) {
  var swiper = new Swiper(".details-top__swiper2", {
    breakpoints: {
      768: {
        slidesPerView: 4,
        spaceBetween: 10,
        freeMode: true,
        watchSlidesProgress: true
      }
    }
  });
  var swiper2 = new Swiper(".details-top__swiper", {
    spaceBetween: 10,
    thumbs: {
      swiper: swiper
    },
    breakpoints: {
      320: {
        pagination: {
          el: ".details-top__pagination"
        }
      }
    }
  });
  var btnHide = document.querySelector('.details-top__block-btn');
  var div = document.querySelector('.details-top__block-desc');
  btnHide.addEventListener('click', function () {
    btnMaxHeight(div, btnHide);
  });

  var _elems = document.querySelectorAll(".details-bottom__head-item");

  var divs = document.querySelectorAll(".details-bottom__body-item");
  activeTab(_elems, divs);

  _elems[0].classList.add("active");

  divs[0].classList.add("active");
  heightTab(divs[0]);
  document.addEventListener("DOMContentLoaded", function () {
    btnsHide(div, btnHide);
  });
  window.addEventListener("resize", function () {
    btnsHide(div, btnHide);
  });
}

if (document.getElementById("projects")) {
  var _elems2 = document.querySelectorAll('.projects__head-item');

  activeElem(_elems2);
}

if (document.getElementById("calculate")) {
  var btns = document.querySelectorAll('.calculate__item-btn');
  var modal = document.querySelectorAll('.calculate__modal');
  var close = document.querySelectorAll('.calculate__modal-close');
  btns.forEach(function (btn) {
    btn.addEventListener("click", function () {
      modal.forEach(function (elem) {
        if (btn.dataset.target === elem.dataset.path) {
          elem.classList.add("active");
          document.body.classList.add("lock");
        }
      });
    });
  });
  close.forEach(function (elem) {
    elem.addEventListener('click', function () {
      elem.parentElement.parentElement.parentElement.parentElement.classList.remove('active');
      document.body.classList.remove("lock");
    });
  });
  modal.forEach(function (elem) {
    var content = elem.querySelector('.calculate__modal-content');
    elem.addEventListener("click", function (e) {
      if (!content.contains(e.target)) {
        console.log(e.target);
        elem.classList.remove("active");
        document.body.classList.remove("lock");
      }
    });
  });
}

if (document.getElementById("areas")) {
  var _btns = Array.from(document.querySelectorAll(".areas-areas__head-item"));

  var _items = Array.from(document.querySelectorAll(".areas-areas__body-item"));

  _btns.forEach(function (btn, index) {
    btn.addEventListener("click", function () {
      _items.forEach(function (item) {
        return item.classList.remove('active');
      });

      _btns.forEach(function (elem) {
        return elem.classList.remove('active');
      });

      btn.classList.add('active');

      _items[index].classList.add('active');

      heightTab(_items[index]);
    });
  });

  _btns[0].classList.add('active');

  _items[0].classList.add('active');

  heightTab(_items[0]);
  var btnsTooltip = document.querySelectorAll(".areas-areas__circle");

  if (window.innerWidth < 992) {
    btnsTooltip.forEach(function (btn) {
      btn.addEventListener('click', function () {
        btnsTooltip.forEach(function (elem) {
          return elem.classList.remove('active');
        });
        btn.classList.add("active");
      });
    });
  }
}

function checkForCompletion(input) {
  if (input.value.length > 0) {
    input.parentElement.classList.add("active");
  } else {
    input.parentElement.classList.remove("active");
  }
}

function activeElem(elems) {
  elems.forEach(function (elem) {
    elem.addEventListener("click", function () {
      elems.forEach(function (el) {
        return el.classList.remove("active");
      });
      elem.classList.add("active");
    });
  });
}

var burger = document.querySelector(".header__burger");
var menu = document.querySelector(".header__menu-mobile");
var headerTabBtn = document.querySelectorAll('.header__select-list-item-btn');
var headerTabList = document.querySelectorAll(".header__select-right-wrap");
var select = document.querySelectorAll(".header__select");
select.forEach(function (elem) {
  elem.addEventListener("mouseover", function () {
    elem.classList.add("active");
  });
  elem.addEventListener("mouseleave", function (e) {
    if (!elem.contains(e.relatedTarget)) {
      elem.classList.remove("active");
      headerTabBtn.forEach(function (btn) {
        btn.classList.remove("active");
      });
      headerTabList.forEach(function (item) {
        item.classList.remove("active");
      });
    }
  });
});
headerTabBtn.forEach(function (btn) {
  btn.addEventListener("mouseover", function () {
    // if (btn.classList.contains("active")) {
    //     headerTabBtn.forEach(btn => {
    //         btn.classList.remove("active")
    //     })
    //     headerTabList.forEach(item => {
    //         item.classList.remove("active")
    //     })
    // }
    // else {
    // }
    headerTabBtn.forEach(function (btn) {
      btn.classList.remove("active");
    });
    headerTabList.forEach(function (item) {
      item.classList.remove("active");
    });
    headerTabList.forEach(function (item) {
      if (btn.dataset.target === item.dataset.path) {
        item.classList.add("active");
        btn.classList.add("active");
      }
    });
  });
});
var bgHeader = document.querySelector(".header__menu-mobile-bg");
burger.addEventListener("click", function () {
  burger.classList.toggle("active");
  menu.classList.toggle("active");
  bgHeader.classList.toggle('active');

  if (burger.classList.contains("active")) {
    document.body.classList.add('lock');
  } else {
    document.body.classList.remove('lock');
  }
});
new Accordion('.accordion-container');
new Accordion('.accordion-second');

function activeTab(btns, divs) {
  btns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      divs.forEach(function (div) {
        div.classList.remove("active");
      });
      btns.forEach(function (elem) {
        return elem.classList.remove('active');
      });
      btn.classList.add('active');
      divs.forEach(function (div) {
        if (div.dataset.target === btn.dataset.path) {
          div.classList.add('active');
          heightTab(div);
        }
      });
    });
  });
}

function heightTab(div) {
  div.parentElement.style.height = div.scrollHeight + 'px';
}

function btnsHide(div, btn) {
  if (div.scrollHeight >= 225) {
    btn.classList.remove("hide");
    div.classList.add("hide");
  } else {
    btn.classList.add("hide");
    div.classList.remove("hide");
  }
}

function btnMaxHeight(div, btn) {
  if (div.clientHeight > 225) {
    btn.classList.remove('active');
    div.style.maxHeight = 225 + 'px';
    div.classList.add("hide");
  } else {
    btn.classList.add('active');
    div.style.maxHeight = div.scrollHeight + 'px';
    div.classList.remove("hide");
  }
}

function regPhone(input) {
  return input.value.replace(/\D/g, '');
}

function inputPhone(e) {
  var input = e.target;
  var inputNumberValue = regPhone(input);
  var formattedInputValue = '';
  var selectionStart = input.selectionStart; // Если в инпут введены симовлы не соответсвующие регулярки, то значение инпута становится пустым

  if (!inputNumberValue) return input.value = ''; // В этой части я не совсем понимаю что происходит

  if (input.value.length != selectionStart) {
    if (e.data && /\D/g.test(e.data)) {
      input.value = inputNumberValue;
    }

    return;
  }

  if (['7', '8', '9'].includes(inputNumberValue[0])) {
    // Если первая цифра девять, тогда мы заменяем первую цифру на 7 и девятку делаем второй цифрой
    if (inputNumberValue[0] == '9') inputNumberValue = '7' + inputNumberValue;
    if (inputNumberValue[0] == '8') inputNumberValue = '7'; // Если первая цифра 7, тогда значение инпута начинается с +7, если первая цифра 8, тогда значение начинается с 8

    var firstSymbol = '+7';
    formattedInputValue = firstSymbol + ' '; // Если в инпуте больше одной цифры добавляем скобку открытия и так далее

    if (inputNumberValue.length > 1) {
      formattedInputValue += '(' + inputNumberValue.substring(1, 4);
    }

    if (inputNumberValue.length >= 5) {
      formattedInputValue += ') ' + inputNumberValue.substring(4, 7);
    }

    if (inputNumberValue.length >= 8) {
      formattedInputValue += '-' + inputNumberValue.substring(7, 9);
    }

    if (inputNumberValue.length >= 10) {
      formattedInputValue += '-' + inputNumberValue.substring(9, 11);
    }
  } else {
    //Если вводимое число не 7, 8 или 9 тогда добавляем +и добавляем введеное число
    formattedInputValue = '+7 (9' + inputNumberValue;
  }

  input.value = formattedInputValue;
}

function onePhoneKeyDown(e) {
  var input = e.target;

  if (regPhone(input).length == 1 && e.keyCode === 8) {
    input.value = '';
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY29va2llIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNsYXNzTGlzdCIsImFkZCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwiY2hlY2tGb3JDb21wbGV0aW9uIiwidG9vbHRpcFRyaWdnZXJMaXN0IiwidG9vbHRpcExpc3QiLCJtYXAiLCJ0b29sdGlwVHJpZ2dlckVsIiwiYm9vdHN0cmFwIiwiVG9vbHRpcCIsInNldEl0ZW0iLCJyZW1vdmUiLCJmZWVkYmFja0lucHV0cyIsInR5cGUiLCJlIiwiaW5wdXRQaG9uZSIsIm9uZVBob25lS2V5RG93biIsInBhcmVudEVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIml0ZW1zIiwiQXJyYXkiLCJmcm9tIiwiaW1nQmxvY2tzIiwiaXRlbSIsImluZGV4IiwiZWwiLCJzd2lwZXJBZnRlckhlcm8iLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicGFnaW5hdGlvbiIsImJyZWFrcG9pbnRzIiwiZWxlbXMiLCJhY3RpdmVFbGVtIiwic3dpcGVyWWVhciIsImZyZWVNb2RlIiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsInN3aXBlckhpc3RvcnkiLCJhbGxvd1RvdWNoTW92ZSIsImVmZmVjdCIsInRodW1icyIsInN3aXBlciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzd2lwZXIyIiwiYnRuSGlkZSIsImRpdiIsImJ0bk1heEhlaWdodCIsImRpdnMiLCJhY3RpdmVUYWIiLCJoZWlnaHRUYWIiLCJidG5zSGlkZSIsImJ0bnMiLCJtb2RhbCIsImNsb3NlIiwiYnRuIiwiZWxlbSIsImRhdGFzZXQiLCJ0YXJnZXQiLCJwYXRoIiwiYm9keSIsImNvbnRlbnQiLCJjb250YWlucyIsImNvbnNvbGUiLCJsb2ciLCJidG5zVG9vbHRpcCIsImlubmVyV2lkdGgiLCJ2YWx1ZSIsImxlbmd0aCIsImJ1cmdlciIsIm1lbnUiLCJoZWFkZXJUYWJCdG4iLCJoZWFkZXJUYWJMaXN0Iiwic2VsZWN0IiwicmVsYXRlZFRhcmdldCIsImJnSGVhZGVyIiwidG9nZ2xlIiwiQWNjb3JkaW9uIiwic3R5bGUiLCJoZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJtYXhIZWlnaHQiLCJyZWdQaG9uZSIsInJlcGxhY2UiLCJpbnB1dE51bWJlclZhbHVlIiwiZm9ybWF0dGVkSW5wdXRWYWx1ZSIsInNlbGVjdGlvblN0YXJ0IiwiZGF0YSIsInRlc3QiLCJpbmNsdWRlcyIsImZpcnN0U3ltYm9sIiwic3Vic3RyaW5nIiwia2V5Q29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixTQUF2QixDQUFmOztBQUNBLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxPQUFiLENBQXFCLGVBQXJCLENBQUwsRUFBNEM7RUFDeENKLE1BQU0sQ0FBQ0ssU0FBUCxDQUFpQkMsR0FBakIsQ0FBcUIsUUFBckI7QUFDSDs7QUFFREMsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QixVQUF4QixFQUFvQyxZQUFNO0VBQ3RDLElBQU1DLE1BQU0sR0FBR1IsUUFBUSxDQUFDUyxnQkFBVCxDQUEwQixhQUExQixDQUFmO0VBQ0FELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlLFVBQUFDLEtBQUs7SUFBQSxPQUFJQyxrQkFBa0IsQ0FBQ0QsS0FBRCxDQUF0QjtFQUFBLENBQXBCO0FBQ0gsQ0FIRDtBQUtBLElBQU1FLGtCQUFrQixHQUFHYixRQUFRLENBQUNTLGdCQUFULENBQTBCLDRCQUExQixDQUEzQjs7QUFDQSxJQUFNSyxXQUFXLEdBQUcsbUJBQUlELGtCQUFKLEVBQXdCRSxHQUF4QixDQUE0QixVQUFBQyxnQkFBZ0I7RUFBQSxPQUFJLElBQUlDLFNBQVMsQ0FBQ0MsT0FBZCxDQUFzQkYs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QS9CLEVBQWtDO01BQzlCa0IsbUJBQW1CLElBQUksTUFBTUQsZ0JBQWdCLENBQUNPLFNBQWpCLENBQTJCLENBQTNCLEVBQThCLENBQTlCLENBQTdCO0lBQ0g7O0lBQ0QsSUFBSVAsZ0JBQWdCLENBQUNqQixNQUFqQixJQUEyQixFQUEvQixFQUFtQztNQUMvQmtCLG1CQUFtQixJQUFJLE1BQU1ELGdCQUFnQixDQUFDTyxTQUFqQixDQUEyQixDQUEzQixFQUE4QixFQUE5QixDQUE3QjtJQUNIO0VBQ0osQ0FwQkQsTUFvQk87SUFBRTtJQUNMTixtQkFBbUIsR0FBRyxVQUFVRCxnQkFBaEM7RUFDSDs7RUFDRHBGLEtBQUssQ0FBQ2tFLEtBQU4sR0FBY21CLG1CQUFkO0FBQ0g7O0FBRUQsU0FBU3ZFLGVBQVQsQ0FBMEJGLENBQTFCLEVBQTZCO0VBQ3pCLElBQUlaLEtBQUssR0FBR1ksQ0FBQyxDQUFDNkMsTUFBZDs7RUFDQSxJQUFJeUIsUUFBUSxDQUFDbEYsS0FBRCxDQUFSLENBQWdCbUUsTUFBaEIsSUFBMEIsQ0FBMUIsSUFBK0J2RCxDQUFDLENBQUNnRixPQUFGLEtBQWMsQ0FBakQsRUFBb0Q7SUFDaEQ1RixLQUFLLENBQUNrRSxLQUFOLEdBQWMsRUFBZDtFQUNIO0FBQ0oiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvb2tpZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29va2llXCIpXG5pZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiY29va2llX196dW1mYVwiKSkge1xuICAgIGNvb2tpZS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicGFnZXNob3dcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5wdXQtZm9ybVwiKVxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IGNoZWNrRm9yQ29tcGxldGlvbihpbnB1dCkpXG59KVxuXG5jb25zdCB0b29sdGlwVHJpZ2dlckxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1icy10b2dnbGU9XCJ0b29sdGlwXCJdJylcbmNvbnN0IHRvb2x0aXBMaXN0ID0gWy4uLnRvb2x0aXBUcmlnZ2VyTGlzdF0ubWFwKHRvb2x0aXBUcmlnZ2VyRWwgPT4gbmV3IGJvb3RzdHJhcC5Ub29sdGlwKHRvb2x0aXBUcmlnZ2VyRWwpKVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29va2llX19idG4nKVxuICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnY29va2llX196dW1mYScsIHRydWUpXG4gICAgICAgIGNvb2tpZS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgfSlcblxuY29uc3QgZmVlZGJhY2tJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmlucHV0LWZvcm1cIilcbmZlZWRiYWNrSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuXG4gICAgaWYgKGlucHV0LnR5cGUgPT09IFwidGVsXCIpIHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7aW5wdXRQaG9uZShlKX0pXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7b25lUGhvbmVLZXlEb3duKGUpfSlcbiAgICB9XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiB7XG4gICAgICAgIGNoZWNrRm9yQ29tcGxldGlvbihpbnB1dClcbiAgICB9KVxuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiB7XG4gICAgICAgIGlucHV0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgIH0pXG59KVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmRleFwiKSkge1xuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlcm9fX2l0ZW1cIikpXG4gICAgY29uc3QgaW1nQmxvY2tzID1BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVyb19fcmlnaHQtZGl2XCIpKVxuXG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcbiAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpbWdCbG9ja3MuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICAgICAgaW1nQmxvY2tzW2luZGV4XS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGNvbnN0IHN3aXBlckFmdGVySGVybyA9IG5ldyBTd2lwZXIoXCIuYWZ0ZXItaGVyb19fY29udGVudFwiLCB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXG4gICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgIGVsOiBcIi5hZnRlci1oZXJvX19wYWdpbmF0aW9uXCJcbiAgICAgICAgfSxcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgIDcwMDoge1xuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAxMjAwOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmxvZ1wiKSkge1xuICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5ibG9nX19oZWFkLWl0ZW1cIilcblxuICAgIGFjdGl2ZUVsZW0oZWxlbXMpXG5cbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWJvdXRcIikpIHtcbiAgICBjb25zdCBzd2lwZXJZZWFyID0gbmV3IFN3aXBlcihcIi5hYm91dC1oaXN0b3J5X190YWItc3dpcGVyXCIsIHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogXCJhdXRvXCIsXG4gICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXG4gICAgICAgIGZyZWVNb2RlOiB0cnVlLFxuICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgICAgMzIwOiB7XG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDc2ODoge1xuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH0pXG4gICAgY29uc3Qgc3dpcGVySGlzdG9yeSA9IG5ldyBTd2lwZXIoXCIuYWJvdXQtaGlzdG9yeV9fYm90dG9tLXN3aXBlclwiLCB7XG4gICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICAgIGFsbG93VG91Y2hNb3ZlOiBmYWxzZSxcbiAgICAgICAgZWZmZWN0OiBcImZhZGVcIixcbiAgICAgICAgdGh1bWJzOiB7XG4gICAgICAgICAgICBzd2lwZXI6IHN3aXBlclllYXJcbiAgICAgICAgfSxcbiAgICAgICAgbmF2aWdhdGlvbjoge1xuICAgICAgICAgICAgbmV4dEVsOiBcIi5hYm91dC1oaXN0b3J5X19idG4tbmV4dFwiLFxuICAgICAgICAgICAgcHJldkVsOiBcIi5hYm91dC1oaXN0b3J5X19idG4tcHJldlwiLFxuICAgICAgICB9LFxuICAgIH0pXG5cbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGV0YWlscy1wcm9kdWN0XCIpKSB7XG4gICAgY29uc3Qgc3dpcGVyID0gbmV3IFN3aXBlcihcIi5kZXRhaWxzLXRvcF9fc3dpcGVyMlwiLCB7XG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjoxMCxcbiAgICAgICAgICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3Qgc3dpcGVyMiA9IG5ldyBTd2lwZXIoXCIuZGV0YWlscy10b3BfX3N3aXBlclwiLCB7XG4gICAgICAgIHNwYWNlQmV0d2VlbjogMTAsXG4gICAgICAgIHRodW1iczoge1xuICAgICAgICAgICAgc3dpcGVyOiBzd2lwZXJcbiAgICAgICAgfSxcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgIDMyMDoge1xuICAgICAgICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZWw6IFwiLmRldGFpbHMtdG9wX19wYWdpbmF0aW9uXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgYnRuSGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXRvcF9fYmxvY2stYnRuJylcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscy10b3BfX2Jsb2NrLWRlc2MnKVxuXG4gICAgYnRuSGlkZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtidG5NYXhIZWlnaHQoZGl2LCBidG5IaWRlKX0pXG5cbiAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGV0YWlscy1ib3R0b21fX2hlYWQtaXRlbVwiKVxuICAgIGNvbnN0IGRpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRldGFpbHMtYm90dG9tX19ib2R5LWl0ZW1cIilcblxuICAgIGFjdGl2ZVRhYihlbGVtcywgZGl2cylcblxuICAgIGVsZW1zWzBdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICBkaXZzWzBdLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICBoZWlnaHRUYWIoZGl2c1swXSlcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAgICAgYnRuc0hpZGUoZGl2LCBidG5IaWRlKVxuICAgIH0pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBidG5zSGlkZShkaXYsIGJ0bkhpZGUpXG4gICAgfSlcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdHNcIikpIHtcbiAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0c19faGVhZC1pdGVtJylcbiAgICBhY3RpdmVFbGVtKGVsZW1zKVxufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxjdWxhdGVcIikpIHtcbiAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGN1bGF0ZV9faXRlbS1idG4nKVxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGN1bGF0ZV9fbW9kYWwnKVxuICAgIGNvbnN0IGNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhbGN1bGF0ZV9fbW9kYWwtY2xvc2UnKVxuXG4gICAgYnRucy5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgbW9kYWwuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYnRuLmRhdGFzZXQudGFyZ2V0ID09PSBlbGVtLmRhdGFzZXQucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwibG9ja1wiKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGNsb3NlLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBlbGVtLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImxvY2tcIilcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgbW9kYWwuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0ZV9fbW9kYWwtY29udGVudCcpXG5cbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRlbnQuY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0KVxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICB9KVxuXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFyZWFzXCIpKSB7XG4gICAgY29uc3QgYnRucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hcmVhcy1hcmVhc19faGVhZC1pdGVtXCIpKVxuICAgIGNvbnN0IGl0ZW1zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmFyZWFzLWFyZWFzX19ib2R5LWl0ZW1cIikpXG5cbiAgICBidG5zLmZvckVhY2goKGJ0biwgaW5kZXgpID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSlcbiAgICAgICAgICAgIGJ0bnMuZm9yRWFjaChlbGVtID0+IGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICBpdGVtc1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgIGhlaWdodFRhYihpdGVtc1tpbmRleF0pXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIGJ0bnNbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICBpdGVtc1swXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgIGhlaWdodFRhYihpdGVtc1swXSlcblxuICAgIGNvbnN0IGJ0bnNUb29sdGlwID0gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYXJlYXMtYXJlYXNfX2NpcmNsZVwiKVxuXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgOTkyKSB7XG4gICAgICAgIGJ0bnNUb29sdGlwLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBidG5zVG9vbHRpcC5mb3JFYWNoKGVsZW0gPT4gZWxlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSlcbiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5mdW5jdGlvbiBjaGVja0ZvckNvbXBsZXRpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICB9XG59XG5mdW5jdGlvbiBhY3RpdmVFbGVtKGVsZW1zKSB7XG4gICAgZWxlbXMuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZWxlbXMuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKVxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuY29uc3QgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2J1cmdlclwiKVxuY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19tZW51LW1vYmlsZVwiKVxuY29uc3QgaGVhZGVyVGFiQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fc2VsZWN0LWxpc3QtaXRlbS1idG4nKVxuY29uc3QgaGVhZGVyVGFiTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyX19zZWxlY3QtcmlnaHQtd3JhcFwiKVxuY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX3NlbGVjdFwiKVxuXG5zZWxlY3QuZm9yRWFjaChlbGVtID0+IHtcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICB9KVxuICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgKGUpID0+IHtcbiAgICAgICAgaWYgKCFlbGVtLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgaGVhZGVyVGFiQnRuLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICB9KVxufSlcbmhlYWRlclRhYkJ0bi5mb3JFYWNoKGJ0biA9PiB7XG4gICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgICAgICAvLyBpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICAvLyAgICAgaGVhZGVyVGFiQnRuLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgLy8gICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAvLyAgICAgfSlcbiAgICAgICAgLy8gICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgLy8gICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgLy8gICAgIH0pXG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gZWxzZSB7XG4gICAgICAgIC8vIH1cbiAgICAgICAgaGVhZGVyVGFiQnRuLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICB9KVxuICAgICAgICBoZWFkZXJUYWJMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICBpZiAoYnRuLmRhdGFzZXQudGFyZ2V0ID09PSBpdGVtLmRhdGFzZXQucGF0aCkge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbn0pXG5cbmNvbnN0IGJnSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21lbnUtbW9iaWxlLWJnXCIpXG5cbmJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgYmdIZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcblxuICAgIGlmIChidXJnZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9jaycpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2NrJylcbiAgICB9XG59KVxuXG5cbm5ldyBBY2NvcmRpb24oJy5hY2NvcmRpb24tY29udGFpbmVyJylcbm5ldyBBY2NvcmRpb24oJy5hY2NvcmRpb24tc2Vjb25kJylcblxuZnVuY3Rpb24gYWN0aXZlVGFiKGJ0bnMsIGRpdnMpIHtcbiAgICBidG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgICAgICAgICBkaXZzLmZvckVhY2goZGl2ID0+IHtcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGJ0bnMuZm9yRWFjaChlbGVtID0+IGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgIGRpdnMuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkaXYuZGF0YXNldC50YXJnZXQgPT09IGJ0bi5kYXRhc2V0LnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFRhYihkaXYpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoZWlnaHRUYWIoZGl2KSB7XG4gICAgZGl2LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZGl2LnNjcm9sbEhlaWdodCArICdweCdcbn1cblxuZnVuY3Rpb24gYnRuc0hpZGUoZGl2LCBidG4pIHtcbiAgICBpZiAoZGl2LnNjcm9sbEhlaWdodCA+PSAyMjUpIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIilcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJ0bk1heEhlaWdodChkaXYsIGJ0bikge1xuICAgIGlmIChkaXYuY2xpZW50SGVpZ2h0ID4gMjI1KSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICBkaXYuc3R5bGUubWF4SGVpZ2h0ID0gMjI1ICsgJ3B4J1xuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImhpZGVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgZGl2LnN0eWxlLm1heEhlaWdodCA9IGRpdi5zY3JvbGxIZWlnaHQgKyAncHgnXG4gICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVnUGhvbmUoaW5wdXQpIHtcbiAgICByZXR1cm4gaW5wdXQudmFsdWUucmVwbGFjZSgvXFxEL2csICcnKTtcbn1cblxuZnVuY3Rpb24gaW5wdXRQaG9uZShlKSB7XG4gICAgbGV0IGlucHV0ID0gZS50YXJnZXQ7XG4gICAgbGV0IGlucHV0TnVtYmVyVmFsdWUgPSByZWdQaG9uZShpbnB1dCk7XG4gICAgbGV0IGZvcm1hdHRlZElucHV0VmFsdWUgPSAnJztcbiAgICBsZXQgc2VsZWN0aW9uU3RhcnQgPSBpbnB1dC5zZWxlY3Rpb25TdGFydFxuICAgIC8vINCV0YHQu9C4INCyINC40L3Qv9GD0YIg0LLQstC10LTQtdC90Ysg0YHQuNC80L7QstC70Ysg0L3QtSDRgdC+0L7RgtCy0LXRgtGB0LLRg9GO0YnQuNC1INGA0LXQs9GD0LvRj9GA0LrQuCwg0YLQviDQt9C90LDRh9C10L3QuNC1INC40L3Qv9GD0YLQsCDRgdGC0LDQvdC+0LLQuNGC0YHRjyDQv9GD0YHRgtGL0LxcbiAgICBpZiAoIWlucHV0TnVtYmVyVmFsdWUpIHJldHVybiBpbnB1dC52YWx1ZSA9ICcnXG4gICAgLy8g0JIg0Y3RgtC+0Lkg0YfQsNGB0YLQuCDRjyDQvdC1INGB0L7QstGB0LXQvCDQv9C+0L3QuNC80LDRjiDRh9GC0L4g0L/RgNC+0LjRgdGF0L7QtNC40YJcbiAgICBpZiAoaW5wdXQudmFsdWUubGVuZ3RoICE9IHNlbGVjdGlvblN0YXJ0KSB7XG4gICAgICAgIGlmIChlLmRhdGEgJiYgL1xcRC9nLnRlc3QoZS5kYXRhKSkge1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBpbnB1dE51bWJlclZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKFsnNycsICc4JywgJzknXS5pbmNsdWRlcyhpbnB1dE51bWJlclZhbHVlWzBdKSkge1xuICAgICAgICAvLyDQldGB0LvQuCDQv9C10YDQstCw0Y8g0YbQuNGE0YDQsCDQtNC10LLRj9GC0YwsINGC0L7Qs9C00LAg0LzRiyDQt9Cw0LzQtdC90Y/QtdC8INC/0LXRgNCy0YPRjiDRhtC40YTRgNGDINC90LAgNyDQuCDQtNC10LLRj9GC0LrRgyDQtNC10LvQsNC10Lwg0LLRgtC+0YDQvtC5INGG0LjRhNGA0L7QuVxuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZVswXSA9PSAnOScpIGlucHV0TnVtYmVyVmFsdWUgPSAnNycgKyBpbnB1dE51bWJlclZhbHVlO1xuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZVswXSA9PSAnOCcpIGlucHV0TnVtYmVyVmFsdWUgPSAnNydcbiAgICAgICAgLy8g0JXRgdC70Lgg0L/QtdGA0LLQsNGPINGG0LjRhNGA0LAgNywg0YLQvtCz0LTQsCDQt9C90LDRh9C10L3QuNC1INC40L3Qv9GD0YLQsCDQvdCw0YfQuNC90LDQtdGC0YHRjyDRgSArNywg0LXRgdC70Lgg0L/QtdGA0LLQsNGPINGG0LjRhNGA0LAgOCwg0YLQvtCz0LTQsCDQt9C90LDRh9C10L3QuNC1INC90LDRh9C40L3QsNC10YLRgdGPINGBIDhcbiAgICAgICAgbGV0IGZpcnN0U3ltYm9sID0gJys3JztcbiAgICAgICAgZm9ybWF0dGVkSW5wdXRWYWx1ZSA9IGZpcnN0U3ltYm9sICsgJyAnO1xuICAgICAgICAvLyDQldGB0LvQuCDQsiDQuNC90L/Rg9GC0LUg0LHQvtC70YzRiNC1INC+0LTQvdC+0Lkg0YbQuNGE0YDRiyDQtNC+0LHQsNCy0LvRj9C10Lwg0YHQutC+0LHQutGDINC+0YLQutGA0YvRgtC40Y8g0Lgg0YLQsNC6INC00LDQu9C10LVcbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgZm9ybWF0dGVkSW5wdXRWYWx1ZSArPSAnKCcgKyBpbnB1dE51bWJlclZhbHVlLnN1YnN0cmluZygxLCA0KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlLmxlbmd0aCA+PSA1KSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlICs9ICcpICcgKyBpbnB1dE51bWJlclZhbHVlLnN1YnN0cmluZyg0LCA3KVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlLmxlbmd0aCA+PSA4KSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlICs9ICctJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDcsIDkpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID49IDEwKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlICs9ICctJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDksIDExKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7IC8v0JXRgdC70Lgg0LLQstC+0LTQuNC80L7QtSDRh9C40YHQu9C+INC90LUgNywgOCDQuNC70LggOSDRgtC+0LPQtNCwINC00L7QsdCw0LLQu9GP0LXQvCAr0Lgg0LTQvtCx0LDQstC70Y/QtdC8INCy0LLQtdC00LXQvdC+0LUg0YfQuNGB0LvQvlxuICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlID0gJys3ICg5JyArIGlucHV0TnVtYmVyVmFsdWU7XG4gICAgfVxuICAgIGlucHV0LnZhbHVlID0gZm9ybWF0dGVkSW5wdXRWYWx1ZVxufVxuXG5mdW5jdGlvbiBvbmVQaG9uZUtleURvd24gKGUpIHtcbiAgICBsZXQgaW5wdXQgPSBlLnRhcmdldDtcbiAgICBpZiAocmVnUGhvbmUoaW5wdXQpLmxlbmd0aCA9PSAxICYmIGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICBpbnB1dC52YWx1ZSA9ICcnO1xuICAgIH1cbn0iXX0=
