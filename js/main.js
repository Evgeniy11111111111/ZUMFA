"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

var cookie = document.querySelector(".cookie");

if (!localStorage.getItem("cookie__zumfa")) {
  cookie.classList.add("active");
}

window.addEventListener("pageshow", function () {
  var inputs = document.querySelectorAll(".input-form");
  inputs.forEach(function (input) {
    return checkForCompletion(input);
  });
});
var tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');

var tooltipList = _toConsumableArray(tooltipTriggerList).map(function (tooltipTriggerEl) {
  return new bootstrap.Tooltip(tooltipTriggerEl);
});

document.querySelector('.cookie__btn').addEventListener("click", function () {
  localStorage.setItem('cookie__zumfa', true);
  cookie.classList.remove("active");
});
var feedbackInputs = document.querySelectorAll(".input-form");
feedbackInputs.forEach(function (input) {
  if (input.type === "tel") {
    input.addEventListener("input", function (e) {
      inputPhone(e);
    });
    input.addEventListener("keydown", function (e) {
      onePhoneKeyDown(e);
    });
  }

  input.addEventListener("blur", function () {
    checkForCompletion(input);
  });
  input.addEventListener("focus", function () {
    input.parentElement.classList.add("active");
  });
});

if (document.getElementById("index")) {
  var items = Array.from(document.querySelectorAll(".hero__item"));
  var imgBlocks = Array.from(document.querySelectorAll(".hero__right-div"));
  items.forEach(function (item, index) {
    item.addEventListener("mouseover", function () {
      items.forEach(function (el) {
        el.classList.remove("active");
      });
      imgBlocks.forEach(function (el) {
        el.classList.remove("active");
      });
      item.classList.add("active");
      imgBlocks[index].classList.add("active");
    });
  });
  var swiperAfterHero = new Swiper(".after-hero__content", {
    slidesPerView: 1,
    spaceBetween: 20,
    pagination: {
      el: ".after-hero__pagination"
    },
    breakpoints: {
      700: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1200: {
        slidesPerView: 3,
        spaceBetween: 20
      }
    }
  });
}

if (document.getElementById("blog")) {
  var elems = document.querySelectorAll(".blog__head-item");
  activeElem(elems);
}

if (document.getElementById("about")) {
  var swiperYear = new Swiper(".about-history__tab-swiper", {
    slidesPerView: "auto",
    spaceBetween: 20,
    freeMode: true,
    watchSlidesProgress: true,
    breakpoints: {
      320: {
        spaceBetween: 20
      },
      768: {
        spaceBetween: 100
      }
    }
  });
  var swiperHistory = new Swiper(".about-history__bottom-swiper", {
    spaceBetween: 10,
    allowTouchMove: false,
    effect: "fade",
    thumbs: {
      swiper: swiperYear
    },
    navigation: {
      nextEl: ".about-history__btn-next",
      prevEl: ".about-history__btn-prev"
    }
  });
}

if (document.getElementById("details-product")) {
  var swiper = new Swiper(".details-top__swiper2", {
    breakpoints: {
      768: {
        slidesPerView: 4,
        spaceBetween: 10,
        freeMode: true,
        watchSlidesProgress: true
      }
    }
  });
  var swiper2 = new Swiper(".details-top__swiper", {
    spaceBetween: 10,
    thumbs: {
      swiper: swiper
    },
    breakpoints: {
      320: {
        pagination: {
          el: ".details-top__pagination"
        }
      }
    }
  });
  var btnHide = document.querySelector('.details-top__block-btn');
  var div = document.querySelector('.details-top__block-desc');
  btnHide.addEventListener('click', function () {
    btnMaxHeight(div, btnHide);
  });

  var _elems = document.querySelectorAll(".details-bottom__head-item");

  var divs = document.querySelectorAll(".details-bottom__body-item");
  activeTab(_elems, divs);

  _elems[0].classList.add("active");

  divs[0].classList.add("active");
  heightTab(divs[0]);
  document.addEventListener("DOMContentLoaded", function () {
    btnsHide(div, btnHide);
  });
  window.addEventListener("resize", function () {
    btnsHide(div, btnHide);
  });
}

if (document.getElementById("projects")) {
  var _elems2 = document.querySelectorAll('.projects__head-item');

  activeElem(_elems2);
}

if (document.getElementById("calculate")) {
  var btns = document.querySelectorAll('.calculate__item-btn');
  var modal = document.querySelectorAll('.calculate__modal');
  var close = document.querySelectorAll('.calculate__modal-close');
  btns.forEach(function (btn) {
    btn.addEventListener("click", function () {
      modal.forEach(function (elem) {
        if (btn.dataset.target === elem.dataset.path) {
          elem.classList.add("active");
          document.body.classList.add("lock");
        }
      });
    });
  });
  close.forEach(function (elem) {
    elem.addEventListener('click', function () {
      elem.parentElement.parentElement.parentElement.parentElement.classList.remove('active');
      document.body.classList.remove("lock");
    });
  });
  modal.forEach(function (elem) {
    var content = elem.querySelector('.calculate__modal-content');
    elem.addEventListener("click", function (e) {
      if (!content.contains(e.target)) {
        console.log(e.target);
        elem.classList.remove("active");
        document.body.classList.remove("lock");
      }
    });
  });
}

function checkForCompletion(input) {
  if (input.value.length > 0) {
    input.parentElement.classList.add("active");
  } else {
    input.parentElement.classList.remove("active");
  }
}

function activeElem(elems) {
  elems.forEach(function (elem) {
    elem.addEventListener("click", function () {
      elems.forEach(function (el) {
        return el.classList.remove("active");
      });
      elem.classList.add("active");
    });
  });
}

var burger = document.querySelector(".header__burger");
var menu = document.querySelector(".header__menu-mobile");
var headerTabBtn = document.querySelectorAll('.header__select-list-item-btn');
var headerTabList = document.querySelectorAll(".header__select-right-wrap");
var select = document.querySelectorAll(".header__select");
select.forEach(function (elem) {
  elem.addEventListener("mouseover", function () {
    elem.classList.add("active");
  });
  elem.addEventListener("mouseleave", function (e) {
    if (!elem.contains(e.relatedTarget)) {
      elem.classList.remove("active");
      headerTabBtn.forEach(function (btn) {
        btn.classList.remove("active");
      });
      headerTabList.forEach(function (item) {
        item.classList.remove("active");
      });
    }
  });
});
headerTabBtn.forEach(function (btn) {
  btn.addEventListener("click", function () {
    if (btn.classList.contains("active")) {
      headerTabBtn.forEach(function (btn) {
        btn.classList.remove("active");
      });
      headerTabList.forEach(function (item) {
        item.classList.remove("active");
      });
    } else {
      headerTabBtn.forEach(function (btn) {
        btn.classList.remove("active");
      });
      headerTabList.forEach(function (item) {
        item.classList.remove("active");
      });
      headerTabList.forEach(function (item) {
        if (btn.dataset.target === item.dataset.path) {
          item.classList.add("active");
          btn.classList.add("active");
        }
      });
    }
  });
});
var bgHeader = document.querySelector(".header__menu-mobile-bg");
burger.addEventListener("click", function () {
  burger.classList.toggle("active");
  menu.classList.toggle("active");
  bgHeader.classList.toggle('active');

  if (burger.classList.contains("active")) {
    document.body.classList.add('lock');
  } else {
    document.body.classList.remove('lock');
  }
});
new Accordion('.accordion-container');
new Accordion('.accordion-second');

function activeTab(btns, divs) {
  btns.forEach(function (btn) {
    btn.addEventListener('click', function () {
      divs.forEach(function (div) {
        div.classList.remove("active");
      });
      btns.forEach(function (elem) {
        return elem.classList.remove('active');
      });
      btn.classList.add('active');
      divs.forEach(function (div) {
        if (div.dataset.target === btn.dataset.path) {
          div.classList.add('active');
          heightTab(div);
        }
      });
    });
  });
}

function heightTab(div) {
  div.parentElement.style.height = div.scrollHeight + 'px';
}

function btnsHide(div, btn) {
  if (div.scrollHeight >= 225) {
    btn.classList.remove("hide");
    div.classList.add("hide");
  } else {
    btn.classList.add("hide");
    div.classList.remove("hide");
  }
}

function btnMaxHeight(div, btn) {
  if (div.clientHeight > 225) {
    btn.classList.remove('active');
    div.style.maxHeight = 225 + 'px';
    div.classList.add("hide");
  } else {
    btn.classList.add('active');
    div.style.maxHeight = div.scrollHeight + 'px';
    div.classList.remove("hide");
  }
}

function regPhone(input) {
  return input.value.replace(/\D/g, '');
}

function inputPhone(e) {
  var input = e.target;
  var inputNumberValue = regPhone(input);
  var formattedInputValue = '';
  var selectionStart = input.selectionStart; // Если в инпут введены симовлы не соответсвующие регулярки, то значение инпута становится пустым

  if (!inputNumberValue) return input.value = ''; // В этой части я не совсем понимаю что происходит

  if (input.value.length != selectionStart) {
    if (e.data && /\D/g.test(e.data)) {
      input.value = inputNumberValue;
    }

    return;
  }

  if (['7', '8', '9'].includes(inputNumberValue[0])) {
    // Если первая цифра девять, тогда мы заменяем первую цифру на 7 и девятку делаем второй цифрой
    if (inputNumberValue[0] == '9') inputNumberValue = '7' + inputNumberValue;
    if (inputNumberValue[0] == '8') inputNumberValue = '7'; // Если первая цифра 7, тогда значение инпута начинается с +7, если первая цифра 8, тогда значение начинается с 8

    var firstSymbol = '+7';
    formattedInputValue = firstSymbol + ' '; // Если в инпуте больше одной цифры добавляем скобку открытия и так далее

    if (inputNumberValue.length > 1) {
      formattedInputValue += '(' + inputNumberValue.substring(1, 4);
    }

    if (inputNumberValue.length >= 5) {
      formattedInputValue += ') ' + inputNumberValue.substring(4, 7);
    }

    if (inputNumberValue.length >= 8) {
      formattedInputValue += '-' + inputNumberValue.substring(7, 9);
    }

    if (inputNumberValue.length >= 10) {
      formattedInputValue += '-' + inputNumberValue.substring(9, 11);
    }
  } else {
    //Если вводимое число не 7, 8 или 9 тогда добавляем +и добавляем введеное число
    formattedInputValue = '+7 (9' + inputNumberValue;
  }

  input.value = formattedInputValue;
}

function onePhoneKeyDown(e) {
  var input = e.target;

  if (regPhone(input).length == 1 && e.keyCode === 8) {
    input.value = '';
  }
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY29va2llIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNsYXNzTGlzdCIsImFkZCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImlucHV0IiwiY2hlY2tGb3JDb21wbGV0aW9uIiwidG9vbHRpcFRyaWdnZXJMaXN0IiwidG9vbHRpcExpc3QiLCJtYXAiLCJ0b29sdGlwVHJpZ2dlckVsIiwiYm9vdHN0cmFwIiwiVG9vbHRpcCIsInNldEl0ZW0iLCJyZW1vdmUiLCJmZWVkYmFja0lucHV0cyIsInR5cGUiLCJlIiwiaW5wdXRQaG9uZSIsIm9uZVBob25lS2V5RG93biIsInBhcmVudEVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIml0ZW1zIiwiQXJyYXkiLCJmcm9tIiwiaW1nQmxvY2tzIiwiaXRlbSIsImluZGV4IiwiZWwiLCJzd2lwZXJBZnRlckhlcm8iLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwicGFnaW5hdGlvbiIsImJyZWFrcG9pbnRzIiwiZWxlbXMiLCJhY3RpdmVFbGVtIiwic3dpcGVyWWVhciIsImZyZWVNb2RlIiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsInN3aXBlckhpc3RvcnkiLCJhbGxvd1RvdWNoTW92ZSIsImVmZmVjdCIsInRodW1icyIsInN3aXBlciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJzd2lwZXIyIiwiYnRuSGlkZSIsImRpdiIsImJ0bk1heEhlaWdodCIsImRpdnMiLCJhY3RpdmVUYWIiLCJoZWlnaHRUYWIiLCJidG5zSGlkZSIsImJ0bnMiLCJtb2RhbCIsImNsb3NlIiwiYnRuIiwiZWxlbSIsImRhdGFzZXQiLCJ0YXJnZXQiLCJwYXRoIiwiYm9keSIsImNvbnRlbnQiLCJjb250YWlucyIsImNvbnNvbGUiLCJsb2ciLCJ2YWx1ZSIsImxlbmd0aCIsImJ1cmdlciIsIm1lbnUiLCJoZWFkZXJUYWJCdG4iLCJoZWFkZXJUYWJMaXN0Iiwic2VsZWN0IiwicmVsYXRlZFRhcmdldCIsImJnSGVhZGVyIiwidG9nZ2xlIiwiQWNjb3JkaW9uIiwic3R5bGUiLCJoZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJjbGllbnRIZWlnaHQiLCJtYXhIZWlnaHQiLCJyZWdQaG9uZSIsInJlcGxhY2UiLCJpbnB1dE51bWJlclZhbHVlIiwiZm9ybWF0dGVkSW5wdXRWYWx1ZSIsInNlbGVjdGlvblN0YXJ0IiwiZGF0YSIsInRlc3QiLCJpbmNsdWRlcyIsImZpcnN0U3ltYm9sIiwic3Vic3RyaW5nIiwia2V5Q29kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFNQSxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixTQUF2QixDQUFmOztBQUNBLElBQUksQ0FBQ0MsWUFBWSxDQUFDQyxPQUFiLENBQXFCLGVBQXJCLENBQUwsRUFBNEM7RUFDeENKLE1BQU0sQ0FBQ0ssU0FBUCxDQUFpQkMsR0FBakIsQ0FBcUIsUUFBckI7QUFDSDs7QUFFREMsTUFBTSxDQUFDQyxnQkFBUCxDQUF3QixVQUF4QixFQUFvQyxZQUFNO0VBQ3RDLElBQU1DLE1BQU0sR0FBR1IsUUFBUSxDQUFDUyxnQkFBVCxDQUEwQixhQUExQixDQUFmO0VBQ0FELE1BQU0sQ0FBQ0UsT0FBUCxDQUFlLFVBQUFDLEtBQUs7SUFBQSxPQUFJQyxrQkFBa0IsQ0FBQ0QsS0FBRCxDQUF0QjtFQUFBLENBQXBCO0FBQ0gsQ0FIRDtBQUtBLElBQU1FLGtCQUFrQixHQUFHYixRQUFRLENBQUNTLGdCQUFULENBQTBCLDRCQUExQixDQUEzQjs7QUFDQSxJQUFNSyxXQUFXLEdBQUcsbUJBQUlELGtCQUFKLEVBQXdCRSxHQUF4QixDQUE0QixVQUFBQyxnQkFBZ0I7RUFBQSxPQUFJLElBQUlDLFNBQVMsQ0FBQ0MsT0FBZCxDQUFzQkYsZ0JBQXRCLENBQUo7QUFBQSxDQUE1QyxDQUFw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Q0FBMkIsQ0FBM0IsRUFBOEIsRUFBOUIsQ0FBN0I7SUFDSDtFQUNKLENBcEJELE1Bb0JPO0lBQUU7SUFDTE4sbUJBQW1CLEdBQUcsVUFBVUQsZ0JBQWhDO0VBQ0g7O0VBQ0RsRixLQUFLLENBQUNnRSxLQUFOLEdBQWNtQixtQkFBZDtBQUNIOztBQUVELFNBQVNyRSxlQUFULENBQTBCRixDQUExQixFQUE2QjtFQUN6QixJQUFJWixLQUFLLEdBQUdZLENBQUMsQ0FBQzZDLE1BQWQ7O0VBQ0EsSUFBSXVCLFFBQVEsQ0FBQ2hGLEtBQUQsQ0FBUixDQUFnQmlFLE1BQWhCLElBQTBCLENBQTFCLElBQStCckQsQ0FBQyxDQUFDOEUsT0FBRixLQUFjLENBQWpELEVBQW9EO0lBQ2hEMUYsS0FBSyxDQUFDZ0UsS0FBTixHQUFjLEVBQWQ7RUFDSDtBQUNKIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjb29raWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvb2tpZVwiKVxuaWYgKCFsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImNvb2tpZV9fenVtZmFcIikpIHtcbiAgICBjb29raWUuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VzaG93XCIsICgpID0+IHtcbiAgICBjb25zdCBpbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmlucHV0LWZvcm1cIilcbiAgICBpbnB1dHMuZm9yRWFjaChpbnB1dCA9PiBjaGVja0ZvckNvbXBsZXRpb24oaW5wdXQpKVxufSlcblxuY29uc3QgdG9vbHRpcFRyaWdnZXJMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYnMtdG9nZ2xlPVwidG9vbHRpcFwiXScpXG5jb25zdCB0b29sdGlwTGlzdCA9IFsuLi50b29sdGlwVHJpZ2dlckxpc3RdLm1hcCh0b29sdGlwVHJpZ2dlckVsID0+IG5ldyBib290c3RyYXAuVG9vbHRpcCh0b29sdGlwVHJpZ2dlckVsKSlcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvb2tpZV9fYnRuJylcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Nvb2tpZV9fenVtZmEnLCB0cnVlKVxuICAgICAgICBjb29raWUuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgIH0pXG5cbmNvbnN0IGZlZWRiYWNrSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbnB1dC1mb3JtXCIpXG5mZWVkYmFja0lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcblxuICAgIGlmIChpbnB1dC50eXBlID09PSBcInRlbFwiKSB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge2lucHV0UGhvbmUoZSl9KVxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge29uZVBob25lS2V5RG93bihlKX0pXG4gICAgfVxuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4ge1xuICAgICAgICBjaGVja0ZvckNvbXBsZXRpb24oaW5wdXQpXG4gICAgfSlcbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4ge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICB9KVxufSlcblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5kZXhcIikpIHtcbiAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZXJvX19pdGVtXCIpKVxuICAgIGNvbnN0IGltZ0Jsb2NrcyA9QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlcm9fX3JpZ2h0LWRpdlwiKSlcblxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaW1nQmxvY2tzLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIGltZ0Jsb2Nrc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBjb25zdCBzd2lwZXJBZnRlckhlcm8gPSBuZXcgU3dpcGVyKFwiLmFmdGVyLWhlcm9fX2NvbnRlbnRcIiwge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiAxLFxuICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICBlbDogXCIuYWZ0ZXItaGVyb19fcGFnaW5hdGlvblwiXG4gICAgICAgIH0sXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgICAgICA3MDA6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgMTIwMDoge1xuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJsb2dcIikpIHtcbiAgICBjb25zdCBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuYmxvZ19faGVhZC1pdGVtXCIpXG5cbiAgICBhY3RpdmVFbGVtKGVsZW1zKVxuXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFib3V0XCIpKSB7XG4gICAgY29uc3Qgc3dpcGVyWWVhciA9IG5ldyBTd2lwZXIoXCIuYWJvdXQtaGlzdG9yeV9fdGFiLXN3aXBlclwiLCB7XG4gICAgICAgIHNsaWRlc1BlclZpZXc6IFwiYXV0b1wiLFxuICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZSxcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcbiAgICAgICAgICAgIDMyMDoge1xuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDEwMFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KVxuICAgIGNvbnN0IHN3aXBlckhpc3RvcnkgPSBuZXcgU3dpcGVyKFwiLmFib3V0LWhpc3RvcnlfX2JvdHRvbS1zd2lwZXJcIiwge1xuICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICBhbGxvd1RvdWNoTW92ZTogZmFsc2UsXG4gICAgICAgIGVmZmVjdDogXCJmYWRlXCIsXG4gICAgICAgIHRodW1iczoge1xuICAgICAgICAgICAgc3dpcGVyOiBzd2lwZXJZZWFyXG4gICAgICAgIH0sXG4gICAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgICAgIG5leHRFbDogXCIuYWJvdXQtaGlzdG9yeV9fYnRuLW5leHRcIixcbiAgICAgICAgICAgIHByZXZFbDogXCIuYWJvdXQtaGlzdG9yeV9fYnRuLXByZXZcIixcbiAgICAgICAgfSxcbiAgICB9KVxuXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldGFpbHMtcHJvZHVjdFwiKSkge1xuICAgIGNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoXCIuZGV0YWlscy10b3BfX3N3aXBlcjJcIiwge1xuICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgICAgNzY4OiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46MTAsXG4gICAgICAgICAgICAgICAgZnJlZU1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcblxuICAgIGNvbnN0IHN3aXBlcjIgPSBuZXcgU3dpcGVyKFwiLmRldGFpbHMtdG9wX19zd2lwZXJcIiwge1xuICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICB0aHVtYnM6IHtcbiAgICAgICAgICAgIHN3aXBlcjogc3dpcGVyXG4gICAgICAgIH0sXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgICAgICAzMjA6IHtcbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgIGVsOiBcIi5kZXRhaWxzLXRvcF9fcGFnaW5hdGlvblwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfSlcbiAgICBjb25zdCBidG5IaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMtdG9wX19ibG9jay1idG4nKVxuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXRvcF9fYmxvY2stZGVzYycpXG5cbiAgICBidG5IaWRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge2J0bk1heEhlaWdodChkaXYsIGJ0bkhpZGUpfSlcblxuICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kZXRhaWxzLWJvdHRvbV9faGVhZC1pdGVtXCIpXG4gICAgY29uc3QgZGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGV0YWlscy1ib3R0b21fX2JvZHktaXRlbVwiKVxuXG4gICAgYWN0aXZlVGFiKGVsZW1zLCBkaXZzKVxuXG4gICAgZWxlbXNbMF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgIGRpdnNbMF0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgIGhlaWdodFRhYihkaXZzWzBdKVxuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xuICAgICAgICBidG5zSGlkZShkaXYsIGJ0bkhpZGUpXG4gICAgfSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGJ0bnNIaWRlKGRpdiwgYnRuSGlkZSlcbiAgICB9KVxufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0c1wiKSkge1xuICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3RzX19oZWFkLWl0ZW0nKVxuICAgIGFjdGl2ZUVsZW0oZWxlbXMpXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhbGN1bGF0ZVwiKSkge1xuICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsY3VsYXRlX19pdGVtLWJ0bicpXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsY3VsYXRlX19tb2RhbCcpXG4gICAgY29uc3QgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsY3VsYXRlX19tb2RhbC1jbG9zZScpXG5cbiAgICBidG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBtb2RhbC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgICAgIGlmIChidG4uZGF0YXNldC50YXJnZXQgPT09IGVsZW0uZGF0YXNldC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJsb2NrXCIpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgY2xvc2UuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKFwibG9ja1wiKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBtb2RhbC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuY2FsY3VsYXRlX19tb2RhbC1jb250ZW50JylcblxuICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmICghY29udGVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQpXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2NrXCIpXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgIH0pXG5cbn1cblxuZnVuY3Rpb24gY2hlY2tGb3JDb21wbGV0aW9uKGlucHV0KSB7XG4gICAgaWYgKGlucHV0LnZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgfVxufVxuZnVuY3Rpb24gYWN0aXZlRWxlbShlbGVtcykge1xuICAgIGVsZW1zLmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGVsZW1zLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSlcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKVxuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19idXJnZXJcIilcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbWVudS1tb2JpbGVcIilcbmNvbnN0IGhlYWRlclRhYkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXJfX3NlbGVjdC1saXN0LWl0ZW0tYnRuJylcbmNvbnN0IGhlYWRlclRhYkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmhlYWRlcl9fc2VsZWN0LXJpZ2h0LXdyYXBcIilcbmNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyX19zZWxlY3RcIilcblxuc2VsZWN0LmZvckVhY2goZWxlbSA9PiB7XG4gICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgfSlcbiAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIChlKSA9PiB7XG4gICAgICAgIGlmICghZWxlbS5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIGhlYWRlclRhYkJ0bi5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBoZWFkZXJUYWJMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5oZWFkZXJUYWJCdG4uZm9yRWFjaChidG4gPT4ge1xuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoYnRuLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgaGVhZGVyVGFiQnRuLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBoZWFkZXJUYWJCdG4uZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaGVhZGVyVGFiTGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYnRuLmRhdGFzZXQudGFyZ2V0ID09PSBpdGVtLmRhdGFzZXQucGF0aCkge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbmNvbnN0IGJnSGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX21lbnUtbW9iaWxlLWJnXCIpXG5cbmJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgYmdIZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJylcblxuICAgIGlmIChidXJnZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnbG9jaycpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdsb2NrJylcbiAgICB9XG59KVxuXG5cbm5ldyBBY2NvcmRpb24oJy5hY2NvcmRpb24tY29udGFpbmVyJylcbm5ldyBBY2NvcmRpb24oJy5hY2NvcmRpb24tc2Vjb25kJylcblxuZnVuY3Rpb24gYWN0aXZlVGFiKGJ0bnMsIGRpdnMpIHtcbiAgICBidG5zLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXG4gICAgICAgICAgICBkaXZzLmZvckVhY2goZGl2ID0+IHtcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGJ0bnMuZm9yRWFjaChlbGVtID0+IGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXG4gICAgICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgICAgIGRpdnMuZm9yRWFjaChkaXYgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkaXYuZGF0YXNldC50YXJnZXQgPT09IGJ0bi5kYXRhc2V0LnBhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodFRhYihkaXYpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoZWlnaHRUYWIoZGl2KSB7XG4gICAgZGl2LnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gZGl2LnNjcm9sbEhlaWdodCArICdweCdcbn1cblxuZnVuY3Rpb24gYnRuc0hpZGUoZGl2LCBidG4pIHtcbiAgICBpZiAoZGl2LnNjcm9sbEhlaWdodCA+PSAyMjUpIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKVxuICAgICAgICBkaXYuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIilcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJ0bk1heEhlaWdodChkaXYsIGJ0bikge1xuICAgIGlmIChkaXYuY2xpZW50SGVpZ2h0ID4gMjI1KSB7XG4gICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgICAgICBkaXYuc3R5bGUubWF4SGVpZ2h0ID0gMjI1ICsgJ3B4J1xuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChcImhpZGVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgZGl2LnN0eWxlLm1heEhlaWdodCA9IGRpdi5zY3JvbGxIZWlnaHQgKyAncHgnXG4gICAgICAgIGRpdi5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKVxuICAgIH1cbn1cblxuXG5mdW5jdGlvbiByZWdQaG9uZShpbnB1dCkge1xuICAgIHJldHVybiBpbnB1dC52YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xufVxuXG5mdW5jdGlvbiBpbnB1dFBob25lKGUpIHtcbiAgICBsZXQgaW5wdXQgPSBlLnRhcmdldDtcbiAgICBsZXQgaW5wdXROdW1iZXJWYWx1ZSA9IHJlZ1Bob25lKGlucHV0KTtcbiAgICBsZXQgZm9ybWF0dGVkSW5wdXRWYWx1ZSA9ICcnO1xuICAgIGxldCBzZWxlY3Rpb25TdGFydCA9IGlucHV0LnNlbGVjdGlvblN0YXJ0XG4gICAgLy8g0JXRgdC70Lgg0LIg0LjQvdC/0YPRgiDQstCy0LXQtNC10L3RiyDRgdC40LzQvtCy0LvRiyDQvdC1INGB0L7QvtGC0LLQtdGC0YHQstGD0Y7RidC40LUg0YDQtdCz0YPQu9GP0YDQutC4LCDRgtC+INC30L3QsNGH0LXQvdC40LUg0LjQvdC/0YPRgtCwINGB0YLQsNC90L7QstC40YLRgdGPINC/0YPRgdGC0YvQvFxuICAgIGlmICghaW5wdXROdW1iZXJWYWx1ZSkgcmV0dXJuIGlucHV0LnZhbHVlID0gJydcbiAgICAvLyDQkiDRjdGC0L7QuSDRh9Cw0YHRgtC4INGPINC90LUg0YHQvtCy0YHQtdC8INC/0L7QvdC40LzQsNGOINGH0YLQviDQv9GA0L7QuNGB0YXQvtC00LjRglxuICAgIGlmIChpbnB1dC52YWx1ZS5sZW5ndGggIT0gc2VsZWN0aW9uU3RhcnQpIHtcbiAgICAgICAgaWYgKGUuZGF0YSAmJiAvXFxEL2cudGVzdChlLmRhdGEpKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGlucHV0TnVtYmVyVmFsdWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoWyc3JywgJzgnLCAnOSddLmluY2x1ZGVzKGlucHV0TnVtYmVyVmFsdWVbMF0pKSB7XG4gICAgICAgIC8vINCV0YHQu9C4INC/0LXRgNCy0LDRjyDRhtC40YTRgNCwINC00LXQstGP0YLRjCwg0YLQvtCz0LTQsCDQvNGLINC30LDQvNC10L3Rj9C10Lwg0L/QtdGA0LLRg9GOINGG0LjRhNGA0YMg0L3QsCA3INC4INC00LXQstGP0YLQutGDINC00LXQu9Cw0LXQvCDQstGC0L7RgNC+0Lkg0YbQuNGE0YDQvtC5XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlWzBdID09ICc5JykgaW5wdXROdW1iZXJWYWx1ZSA9ICc3JyArIGlucHV0TnVtYmVyVmFsdWU7XG4gICAgICAgIGlmIChpbnB1dE51bWJlclZhbHVlWzBdID09ICc4JykgaW5wdXROdW1iZXJWYWx1ZSA9ICc3J1xuICAgICAgICAvLyDQldGB0LvQuCDQv9C10YDQstCw0Y8g0YbQuNGE0YDQsCA3LCDRgtC+0LPQtNCwINC30L3QsNGH0LXQvdC40LUg0LjQvdC/0YPRgtCwINC90LDRh9C40L3QsNC10YLRgdGPINGBICs3LCDQtdGB0LvQuCDQv9C10YDQstCw0Y8g0YbQuNGE0YDQsCA4LCDRgtC+0LPQtNCwINC30L3QsNGH0LXQvdC40LUg0L3QsNGH0LjQvdCw0LXRgtGB0Y8g0YEgOFxuICAgICAgICBsZXQgZmlyc3RTeW1ib2wgPSAnKzcnO1xuICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlID0gZmlyc3RTeW1ib2wgKyAnICc7XG4gICAgICAgIC8vINCV0YHQu9C4INCyINC40L3Qv9GD0YLQtSDQsdC+0LvRjNGI0LUg0L7QtNC90L7QuSDRhtC40YTRgNGLINC00L7QsdCw0LLQu9GP0LXQvCDRgdC60L7QsdC60YMg0L7RgtC60YDRi9GC0LjRjyDQuCDRgtCw0Log0LTQsNC70LXQtVxuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBmb3JtYXR0ZWRJbnB1dFZhbHVlICs9ICcoJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDEsIDQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID49IDUpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJykgJyArIGlucHV0TnVtYmVyVmFsdWUuc3Vic3RyaW5nKDQsIDcpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlucHV0TnVtYmVyVmFsdWUubGVuZ3RoID49IDgpIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJy0nICsgaW5wdXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcoNywgOSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5wdXROdW1iZXJWYWx1ZS5sZW5ndGggPj0gMTApIHtcbiAgICAgICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgKz0gJy0nICsgaW5wdXROdW1iZXJWYWx1ZS5zdWJzdHJpbmcoOSwgMTEpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHsgLy/QldGB0LvQuCDQstCy0L7QtNC40LzQvtC1INGH0LjRgdC70L4g0L3QtSA3LCA4INC40LvQuCA5INGC0L7Qs9C00LAg0LTQvtCx0LDQstC70Y/QtdC8ICvQuCDQtNC+0LHQsNCy0LvRj9C10Lwg0LLQstC10LTQtdC90L7QtSDRh9C40YHQu9C+XG4gICAgICAgIGZvcm1hdHRlZElucHV0VmFsdWUgPSAnKzcgKDknICsgaW5wdXROdW1iZXJWYWx1ZTtcbiAgICB9XG4gICAgaW5wdXQudmFsdWUgPSBmb3JtYXR0ZWRJbnB1dFZhbHVlXG59XG5cbmZ1bmN0aW9uIG9uZVBob25lS2V5RG93biAoZSkge1xuICAgIGxldCBpbnB1dCA9IGUudGFyZ2V0O1xuICAgIGlmIChyZWdQaG9uZShpbnB1dCkubGVuZ3RoID09IDEgJiYgZS5rZXlDb2RlID09PSA4KSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gJyc7XG4gICAgfVxufSJdfQ==
