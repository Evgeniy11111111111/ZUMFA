"use strict";

if (document.getElementById("index")) {
  var swiperAfterHero = new Swiper(".after-hero__content", {
    slidesPerView: 1,
    spaceBetween: 20,
    pagination: {
      el: ".after-hero__pagination"
    },
    breakpoints: {
      700: {
        slidesPerView: 2,
        spaceBetween: 20
      },
      1400: {
        slidesPerView: 3,
        spaceBetween: 20
      }
    }
  });
  var feedbackInputs = document.querySelectorAll(".input-form");
  feedbackInputs.forEach(function (input) {
    input.addEventListener("blur", function () {
      checkForCompletion(input);
    });
    input.addEventListener("focus", function () {
      input.parentElement.classList.add("active");
    });
    checkForCompletion(input);
  });
}

if (document.getElementById("blog")) {
  var elems = document.querySelectorAll(".blog__head-item");
  activeElem(elems);
}

if (document.getElementById("about")) {
  var swiperYear = new Swiper(".about-history__tab-swiper", {
    slidesPerView: "auto",
    spaceBetween: 20,
    freeMode: true,
    watchSlidesProgress: true,
    breakpoints: {
      320: {
        spaceBetween: 20
      },
      768: {
        spaceBetween: 100
      }
    }
  });
  var swiperHistory = new Swiper(".about-history__bottom-swiper", {
    spaceBetween: 10,
    allowTouchMove: false,
    thumbs: {
      swiper: swiperYear
    },
    navigation: {
      nextEl: ".about-history__btn-next",
      prevEl: ".about-history__btn-prev"
    }
  });
  ymaps.ready(initMap);

  var _feedbackInputs = document.querySelectorAll(".input-form");

  _feedbackInputs.forEach(function (input) {
    input.addEventListener("blur", function () {
      checkForCompletion(input);
    });
    input.addEventListener("focus", function () {
      input.parentElement.classList.add("active");
    });
    checkForCompletion(input);
  });
}

if (document.getElementById("details")) {
  var swiper = new Swiper(".details-top__swiper2", {
    slidesPerView: 4,
    spaceBetween: 10,
    freeMode: true,
    watchSlidesProgress: true
  });
  var swiper2 = new Swiper(".details-top__swiper", {
    spaceBetween: 10,
    thumbs: {
      swiper: swiper
    }
  });
}

function checkForCompletion(input) {
  if (input.value.length > 0) {
    input.parentElement.classList.add("active");
  } else {
    input.parentElement.classList.remove("active");
  }
}

function activeElem(elems) {
  elems.forEach(function (elem) {
    elem.addEventListener("click", function () {
      elems.forEach(function (el) {
        return el.classList.remove("active");
      });
      elem.classList.add("active");
    });
  });
}

function initMap() {
  var myMap = new ymaps.Map("about__map", {
    center: [55.79402656892602, 37.48264549999995],
    zoom: 18,
    controls: []
  }); // Создание метки с круглой активной областью.

  var circleLayout = ymaps.templateLayoutFactory.createClass("<div class=\"placemark_layout_container\">\n        <span class=\"circle_layout\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"33\" viewBox=\"0 0 25 33\" fill=\"none\">\n                <rect width=\"24\" height=\"33\" transform=\"translate(1)\" fill=\"white\"/>\n                <path d=\"M23.79 11.0948C23.79 14.0105 22.0886 17.961 19.7067 21.9555C17.46 25.7235 14.6591 29.4479 12.2878 32.2348C9.78094 29.3239 6.974 25.5926 4.75877 21.8502C2.41771 17.8952 0.790039 14.0135 0.790039 11.0948C0.790039 5.27967 5.90112 0.5 12.29 0.5C18.679 0.5 23.79 5.27967 23.79 11.0948Z\" fill=\"#FFD341\" stroke=\"#FFCE00\"/>\n                <circle cx=\"12.29\" cy=\"12\" r=\"5.5\" fill=\"white\" stroke=\"#FFCE00\"/>\n            </svg>\n        </span>\n    </div>");
  var BalloonContentLayout = ymaps.templateLayoutFactory.createClass("\n        <div class=\"hint_layout_container\">\n            <div class=\"hint_layout_content\">\n                <div class=\"hint_layout_head\">\n                    {{ properties.name }}\n                </div>\n                <div class=\"hint_layout_body\">\n                    <div class=\"hint_layout_city\">\n                        <span class=\"hint_layout_svg\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"11\" height=\"14\" viewBox=\"0 0 11 14\" fill=\"none\">\n                                <path d=\"M9.91641 4.53803C9.91641 6.98903 7.08564 11.0242 5.11641 13.3001C3.0241 10.9104 0.316406 6.98903 0.316406 4.53803C0.316406 2.08703 2.46544 0.100098 5.11641 0.100098C7.76737 0.100098 9.91641 2.08703 9.91641 4.53803Z\" fill=\"#21201C\"/>\n                                <circle cx=\"5.11875\" cy=\"4.9\" r=\"2.4\" fill=\"white\"/>\n                            </svg>\n                        </span>\n                        <span class=\"hint_layout_text\">\n                            {{ properties.city }}   \n                        </span>\n                    </div>\n                    <div class=\"hint_layout_address hint_layout_text\">\n                        {{ properties.address }}    \n                    </div>\n                    <div class=\"hint_layout_phone hint_layout_text\">\n                    {{ properties.phone }}    \n                    </div>\n                </div>\n            </div>\n        </div>\n        \n     ");
  var circlePlacemark = new ymaps.Placemark([55.79402656892602, 37.48264549999995], {
    name: "Центральный офис",
    city: "Москва",
    address: "РФ, 123060, Москва ул. Расплетина, дом 5, стр.9",
    phone: "+7 (495) 760-91-96 "
  }, {
    balloonContentLayout: BalloonContentLayout,
    hideIconOnBalloonOpen: false,
    iconLayout: circleLayout,
    iconShape: {
      type: 'Circle',
      coordinates: [0, 0],
      radius: 25
    }
  });
  myMap.geoObjects.add(circlePlacemark);
  myMap.behaviors.disable('drag');
  myMap.behaviors.disable('scrollZoom');
  myMap.controls.remove('searchControl');
  myMap.controls.remove('trafficControl');
  myMap.controls.remove('typeSelector');
  myMap.controls.remove('fullscreenControl');
  myMap.controls.remove('rulerControl');
}

document.addEventListener("click", function (e) {
  headerSelect.forEach(function (elem) {
    if (!elem.contains(e.target)) {
      elem.classList.remove("active");
    }
  });
});
var burger = document.querySelector(".header__burger");
var menu = document.querySelector(".header__menu");
var headerTabBtn = document.querySelectorAll('.header__select-list-item-btn');
var headerTabList = document.querySelectorAll(".header__select-right-list");
var select = document.querySelectorAll(".header__select");

function applyEventListeners() {
  if (window.matchMedia("(max-width: 1150px)").matches) {
    burger.addEventListener("click", function () {
      burger.classList.toggle("active");
      menu.classList.toggle("active");

      if (burger.classList.contains("active")) {
        document.body.classList.add("lock");
      } else {
        document.body.classList.remove("lock");
      }
    });
    select.forEach(function (elem) {
      elem.firstElementChild.addEventListener("click", function () {
        elem.classList.toggle("active");
      });
    });
    headerTabBtn.forEach(function (btn) {
      btn.addEventListener('click', function () {
        headerTabList.forEach(function (item) {
          item.classList.remove("active");
        });
        headerTabList.forEach(function (item) {
          if (btn.dataset.target === item.dataset.path) {
            item.classList.add("active");
          }
        });
      });
    });
  } else {
    select.forEach(function (elem) {
      elem.addEventListener("mouseover", function () {
        elem.classList.add("active");
      });
      elem.addEventListener("mouseleave", function (e) {
        if (!elem.contains(e.relatedTarget)) {
          elem.classList.remove("active");
          headerTabBtn.forEach(function (btn) {
            btn.classList.remove("active");
          });
          headerTabList.forEach(function (item) {
            item.classList.remove("active");
          });
        }
      });
    });
    headerTabBtn.forEach(function (btn) {
      btn.addEventListener("click", function () {
        headerTabBtn.forEach(function (btn) {
          btn.classList.remove("active");
        });
        headerTabList.forEach(function (item) {
          item.classList.remove("active");
        });
        headerTabList.forEach(function (item) {
          if (btn.dataset.target === item.dataset.path) {
            item.classList.add("active");
            btn.classList.add("active");
          }
        });
      });
    });
  }
}

document.addEventListener("DOMContentLoaded", applyEventListeners);
window.addEventListener("resize", applyEventListeners);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN3aXBlckFmdGVySGVybyIsIlN3aXBlciIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJwYWdpbmF0aW9uIiwiZWwiLCJicmVha3BvaW50cyIsImZlZWRiYWNrSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjaGVja0ZvckNvbXBsZXRpb24iLCJwYXJlbnRFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZWxlbXMiLCJhY3RpdmVFbGVtIiwic3dpcGVyWWVhciIsImZyZWVNb2RlIiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsInN3aXBlckhpc3RvcnkiLCJhbGxvd1RvdWNoTW92ZSIsInRodW1icyIsInN3aXBlciIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJ5bWFwcyIsInJlYWR5IiwiaW5pdE1hcCIsInN3aXBlcjIiLCJ2YWx1ZSIsImxlbmd0aCIsInJlbW92ZSIsImVsZW0iLCJteU1hcCIsIk1hcCIsImNlbnRlciIsInpvb20iLCJjb250cm9scyIsImNpcmNsZUxheW91dCIsInRlbXBsYXRlTGF5b3V0RmFjdG9yeSIsImNyZWF0ZUNsYXNzIiwiQmFsbG9vbkNvbnRlbnRMYXlvdXQiLCJjaXJjbGVQbGFjZW1hcmsiLCJQbGFjZW1hcmsiLCJuYW1lIiwiY2l0eSIsImFkZHJlc3MiLCJwaG9uZSIsImJhbGxvb25Db250ZW50TGF5b3V0IiwiaGlkZUljb25PbkJhbGxvb25PcGVuIiwiaWNvbkxheW91dCIsImljb25TaGFwZSIsInR5cGUiLCJjb29yZGluYXRlcyIsInJhZGl1cyIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwiZSIsImhlYWRlclNlbGVjdCIsImNvbnRhaW5zIiwidGFyZ2V0IiwiYnVyZ2VyIiwicXVlcnlTZWxlY3RvciIsIm1lbnUiLCJoZWFkZXJUYWJCdG4iLCJoZWFkZXJUYWJMaXN0Iiwic2VsZWN0IiwiYXBwbHlFdmVudExpc3RlbmVycyIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwidG9nZ2xlIiwiYm9keSIsImZpcnN0RWxlbWVudENoaWxkIiwiYnRuIiwiaXRlbSIsImRhdGFzZXQiLCJwYXRoIiwicmVsYXRlZFRhcmdldCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxRQUFRLENBQUNDLGNBQVQsQ0FBd0IsT0FBeEIsQ0FBSixFQUFzQztFQUNsQyxJQUFNQyxlQUFlLEdBQUcsSUFBSUMsTUFBSixDQUFXLHNCQUFYLEVBQW1DO0lBQ3ZEQyxhQUFhLEVBQUUsQ0FEd0M7SUFFdkRDLFlBQVksRUFBRSxFQUZ5QztJQUd2REMsVUFBVSxFQUFFO01BQ1JDLEVBQUUsRUFBRTtJQURJLENBSDJDO0lBTXZEQyxXQUFXLEVBQUU7TUFDVCxLQUFLO1FBQ0RKLGFBQWEsRUFBRSxDQURkO1FBRURDLFlBQVksRUFBRTtNQUZiLENBREk7TUFLVCxNQUFNO1FBQ0ZELGFBQWEsRUFBRSxDQURiO1FBRUZDLFlBQVksRUFBRTtNQUZaO0lBTEc7RUFOMEMsQ0FBbkMsQ0FBeEI7RUFrQkEsSUFBTUksY0FBYyxHQUFHVCxRQUFRLENBQUNVLGdCQUFULENBQTBCLGFBQTFCLENBQXZCO0VBQ0FELGNBQWMsQ0FBQ0UsT0FBZixDQUF1QixVQUFBQyxLQUFLLEVBQUk7SUFDNUJBLEtBQUssQ0FBQ0MsZ0JBQU4sQ0FBdUIsTUFBdkIsRUFBK0IsWUFBTTtNQUNqQ0Msa0JBQWtCLENBQUNGLEtBQUQsQ0FBbEI7SUFDSCxDQUZEO0lBR0FBLEtBQUssQ0FBQ0MsZ0JBQU4sQ0FBdUIsT0FBdkIsRUFBZ0MsWUFBTTtNQUNsQ0QsS0FBSyxDQUFDRyxhQUFOLENBQW9CQyxTQUFwQixDQUE4QkMsR0FBOUIsQ0FBa0MsUUFBbEM7SUFDSCxDQUZEO0lBR0FILGtCQUFrQixDQUFDRixLQUFELENBQWxCO0VBQ0gsQ0FSRDtBQVNIOztBQUVELElBQUlaLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixNQUF4QixDQUFKLEVBQXFDO0VBQ2pDLElBQU1pQixLQUFLLEdBQUdsQixRQUFRLENBQUNVLGdCQUFULENBQTBCLGtCQUExQixDQUFkO0VBRUFTLFVBQVUsQ0FBQ0QsS0FBRCxDQUFWO0FBRUg7O0FBRUQsSUFBSWxCLFFBQVEsQ0FBQ0MsY0FBVCxDQUF3QixPQUF4QixDQUFKLEVBQXNDO0VBQ2xDLElBQU1tQixVQUFVLEdBQUcsSUFBSWpCLE1BQUosQ0FBVyw0QkFBWCxFQUF5QztJQUN4REMsYUFBYSxFQUFFLE1BRHlDO0lBRXhEQyxZQUFZLEVBQUUsRUFGMEM7SUFHeERnQixRQUFRLEVBQUUsSUFIOEM7SUFJeERDLG1CQUFtQixFQUFFLElBSm1DO0lBS3hEZCxXQUFXLEVBQUU7TUFDVCxLQUFLO1FBQ0RILFlBQVksRUFBRTtNQURiLENBREk7TUFJVCxLQUFLO1FBQ0RBLFlBQVksRUFBRTtNQURiO0lBSkk7RUFMMkMsQ0FBekMsQ0FBbkI7RUFlQSxJQUFNa0IsYUFBYSxHQUFHLElBQUlwQixNQUFKLENBQVcsK0JBQVgsRUFBNEM7SUFDOURFLFlBQVksRUFBRSxFQURnRDtJQUU5RG1CLGNBQWMsRUFBRSxLQUY4QztJQUc5REMsTUFBTSxFQUFFO01BQ0pDLE1BQU0sRUFBRU47SUFESixDQUhzRDtJQU05RE8sVUFBVSxFQUFFO01BQ1JDLE1BQU0sRUFBRSwwQkFEQTtNQUVSQyxNQUFNLEVBQUU7SUFGQTtFQU5rRCxDQUE1QyxDQUF0QjtFQVlBQyxLQUFLLENBQUNDLEtBQU4sQ0FBWUMsT0FBWjs7RUFFQSxJQUFNdkIsZUFBYyxHQUFHVCxRQUFRLENBQUNVLGdCQUFULENBQTBCLGFBQTFCLENBQXZCOztFQUNBRCxlQUFjLENBQUNFLE9BQWYsQ0FBdUIsVUFBQUMsS0FBSyxFQUFJO0lBQzVCQSxLQUFLLENBQUNDLGdCQUFOLENBQXVCLE1BQXZCLEVBQStCLFlBQU07TUFDakNDLGtCQUFrQixDQUFDRixLQUFELENBQWxCO0lBQ0gsQ0FGRDtJQUdBQSxLQUFLLENBQUNDLGdCQUFOLENBQXVCLE9BQXZCLEVBQWdDLFlBQU07TUFDbENELEtBQUssQ0FBQ0csYUFBTixDQUFvQkMsU0FBcEIsQ0FBOEJDLEdBQTlCLENBQWtDLFFBQWxDO0lBQ0gsQ0FGRDtJQUdBSCxrQkFBa0IsQ0FBQ0YsS0FBRCxDQUFsQjtFQUNILENBUkQ7QUFTSDs7QUFFRCxJQUFJWixRQUFRLENBQUNDLGNBQVQsQ0FBd0IsU0FBeEIsQ0FBSixFQUF3QztFQUNwQyxJQUFNeUIsTUFBTSxHQUFHLElBQUl2QixNQUFKLENBQVcsdUJBQVgsRUFBb0M7SUFDL0NDLGFBQWEsRUFBRSxDQURnQztJQUUvQ0MsWUFBWSxFQUFDLEVBRmtDO0lBRy9DZ0IsUUFBUSxFQUFFLElBSHFDO0lBSS9DQyxtQkFBbUIsRUFBRTtFQUowQixDQUFwQyxDQUFmO0VBT0EsSUFBTVcsT0FBTyxHQUFHLElBQUk5QixNQUFKLENBQVcsc0JBQVgsRUFBbUM7SUFDL0NFLFlBQVksRUFBRSxFQURpQztJQUUvQ29CLE1BQU0sRUFBRTtNQUNKQyxNQUFNLEVBQUVBO0lBREo7RUFGdUMsQ0FBbkMsQ0FBaEI7QUFNSDs7QUFFRCxTQUFTWixrQkFBVCxDQUE0QkYsS0FBNUIsRUFBbUM7RUFDL0IsSUFBSUEsS0FBSyxDQUFDc0IsS0FBTixDQUFZQyxNQUFaLEdBQXFCLENBQXpCLEVBQTRCO0lBQ3hCdkIsS0FBSyxDQUFDRyxhQUFOLENBQW9CQyxTQUFwQixDQUE4QkMsR0FBOUIsQ0FBa0MsUUFBbEM7RUFDSCxDQUZELE1BRU87SUFDSEwsS0FBSyxDQUFDRyxhQUFOLENBQW9CQyxTQUFwQixDQUE4Qm9CLE1BQTlCLENBQXFDLFFBQXJDO0VBQ0g7QUFDSjs7QUFDRCxTQUFTakIsVUFBVCxDQUFvQkQsS0FBcEIsRUFBMkI7RUFDdkJBLEtBQUssQ0FBQ1AsT0FBTixDQUFjLFVBQUEwQixJQUFJLEVBQUk7SUFDbEJBLElBQUksQ0FBQ3hCLGdCQUFMLENBQXNCLE9BQXRCLEVBQStCLFlBQU07TUFDakNLLEtBQUssQ0FBQ1AsT0FBTixDQUFjLFVBQUFKLEVBQUU7UUFBQSxPQUFJQSxFQUFFLENBQUNTLFNBQUgsQ0FBYW9CLE1BQWIsQ0FBb0IsUUFBcEIsQ0FBSjtNQUFBLENBQWhCO01BQ0FDLElBQUksQ0FBQ3JCLFNBQUwsQ0FBZUMsR0FBZixDQUFtQixRQUFuQjtJQUNILENBSEQ7RUFJSCxDQUxEO0FBTUg7O0FBRUQsU0FBU2UsT0FBVCxHQUFtQjtFQUNmLElBQUlNLEtBQUssR0FBRyxJQUFJUixLQUFLLENBQUNTLEdBQVYsQ0FBYyxZQUFkLEVBQTRCO0lBQ3BDQyxNQUFNLEVBQUUsQ0FBQyxpQkFBRCxFQUFtQixpQkFBbkIsQ0FENEI7SUFFcENDLElBQUksRUFBRSxFQUY4QjtJQUdwQ0MsUUFBUSxFQUFFO0VBSDBCLENBQTVCLENBQVosQ0FEZSxDQU9mOztFQUNBLElBQUlDLFlBQVksR0FBR2IsS0FBSyxDQUFDYyxxQkFBTixDQUE0QkMsV0FBNUIsc3hCQUFuQjtFQVNBLElBQUlDLG9CQUFvQixHQUFHaEIsS0FBSyxDQUFDYyxxQkFBTixDQUE0QkMsV0FBNUIsdStDQUEzQjtFQWdDQSxJQUFJRSxlQUFlLEdBQUcsSUFBSWpCLEtBQUssQ0FBQ2tCLFNBQVYsQ0FDbEIsQ0FBQyxpQkFBRCxFQUFtQixpQkFBbkIsQ0FEa0IsRUFDcUI7SUFDbkNDLElBQUksRUFBRSxrQkFENkI7SUFFbkNDLElBQUksRUFBRSxRQUY2QjtJQUduQ0MsT0FBTyxFQUFFLGlEQUgwQjtJQUluQ0MsS0FBSyxFQUFFO0VBSjRCLENBRHJCLEVBTWY7SUFDQ0Msb0JBQW9CLEVBQUVQLG9CQUR2QjtJQUVDUSxxQkFBcUIsRUFBRSxLQUZ4QjtJQUdDQyxVQUFVLEVBQUVaLFlBSGI7SUFJQ2EsU0FBUyxFQUFFO01BQ1BDLElBQUksRUFBRSxRQURDO01BRVBDLFdBQVcsRUFBRSxDQUFDLENBQUQsRUFBSSxDQUFKLENBRk47TUFHUEMsTUFBTSxFQUFFO0lBSEQ7RUFKWixDQU5lLENBQXRCO0VBa0JBckIsS0FBSyxDQUFDc0IsVUFBTixDQUFpQjNDLEdBQWpCLENBQXFCOEIsZUFBckI7RUFDQVQsS0FBSyxDQUFDdUIsU0FBTixDQUFnQkMsT0FBaEIsQ0FBd0IsTUFBeEI7RUFDQXhCLEtBQUssQ0FBQ3VCLFNBQU4sQ0FBZ0JDLE9BQWhCLENBQXdCLFlBQXhCO0VBQ0F4QixLQUFLLENBQUNJLFFBQU4sQ0FBZU4sTUFBZixDQUFzQixlQUF0QjtFQUNBRSxLQUFLLENBQUNJLFFBQU4sQ0FBZU4sTUFBZixDQUFzQixnQkFBdEI7RUFDQUUsS0FBSyxDQUFDSSxRQUFOLENBQWVOLE1BQWYsQ0FBc0IsY0FBdEI7RUFDQUUsS0FBSyxDQUFDSSxRQUFOLENBQWVOLE1BQWYsQ0FBc0IsbUJBQXRCO0VBQ0FFLEtBQUssQ0FBQ0ksUUFBTixDQUFlTixNQUFmLENBQXNCLGNBQXRCO0FBQ0g7O0FBRURwQyxRQUFRLENBQUNhLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFVBQUNrRCxDQUFELEVBQU87RUFDdENDLFlBQVksQ0FBQ3JELE9BQWIsQ0FBcUIsVUFBQTBCLElBQUksRUFBSTtJQUN6QixJQUFHLENBQUNBLElBQUksQ0FBQzRCLFFBQUwsQ0FBY0YsQ0FBQyxDQUFDRyxNQUFoQixDQUFKLEVBQTZCO01BQ3pCN0IsSUFBSSxDQUFDckIsU0FBTCxDQUFlb0IsTUFBZixDQUFzQixRQUF0QjtJQUNIO0VBQ0osQ0FKRDtBQUtILENBTkQ7QUFRQSxJQUFNK0IsTUFBTSxHQUFHbkUsUUFBUSxDQUFDb0UsYUFBVCxDQUF1QixpQkFBdkIsQ0FBZjtBQUNBLElBQU1DLElBQUksR0FBR3JFLFFBQVEsQ0FBQ29FLGFBQVQsQ0FBdUIsZUFBdkIsQ0FBYjtBQUNBLElBQU1FLFlBQVksR0FBR3RFLFFBQVEsQ0FBQ1UsZ0JBQVQsQ0FBMEIsK0JBQTFCLENBQXJCO0FBQ0EsSUFBTTZELGFBQWEsR0FBR3ZFLFFBQVEsQ0FBQ1UsZ0JBQVQsQ0FBMEIsNEJBQTFCLENBQXRCO0FBQ0EsSUFBTThELE1BQU0sR0FBR3hFLFFBQVEsQ0FBQ1UsZ0JBQVQsQ0FBMEIsaUJBQTFCLENBQWY7O0FBQ0EsU0FBUytELG1CQUFULEdBQWdDO0VBQzVCLElBQUlDLE1BQU0sQ0FBQ0MsVUFBUCxDQUFrQixxQkFBbEIsRUFBeUNDLE9BQTdDLEVBQXNEO0lBQ2xEVCxNQUFNLENBQUN0RCxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxZQUFNO01BQ25Dc0QsTUFBTSxDQUFDbkQsU0FBUCxDQUFpQjZELE1BQWpCLENBQXdCLFFBQXhCO01BQ0FSLElBQUksQ0FBQ3JELFNBQUwsQ0FBZTZELE1BQWYsQ0FBc0IsUUFBdEI7O01BQ0EsSUFBSVYsTUFBTSxDQUFDbkQsU0FBUCxDQUFpQmlELFFBQWpCLENBQTBCLFFBQTFCLENBQUosRUFBeUM7UUFDckNqRSxRQUFRLENBQUM4RSxJQUFULENBQWM5RCxTQUFkLENBQXdCQyxHQUF4QixDQUE0QixNQUE1QjtNQUNILENBRkQsTUFFTztRQUNIakIsUUFBUSxDQUFDOEUsSUFBVCxDQUFjOUQsU0FBZCxDQUF3Qm9CLE1BQXhCLENBQStCLE1BQS9CO01BQ0g7SUFDSixDQVJEO0lBU0FvQyxNQUFNLENBQUM3RCxPQUFQLENBQWUsVUFBQTBCLElBQUksRUFBSTtNQUNuQkEsSUFBSSxDQUFDMEMsaUJBQUwsQ0FBdUJsRSxnQkFBdkIsQ0FBd0MsT0FBeEMsRUFBaUQsWUFBTTtRQUNuRHdCLElBQUksQ0FBQ3JCLFNBQUwsQ0FBZTZELE1BQWYsQ0FBc0IsUUFBdEI7TUFDSCxDQUZEO0lBR0gsQ0FKRDtJQUtBUCxZQUFZLENBQUMzRCxPQUFiLENBQXFCLFVBQUFxRSxHQUFHLEVBQUk7TUFDeEJBLEdBQUcsQ0FBQ25FLGdCQUFKLENBQXFCLE9BQXJCLEVBQThCLFlBQU07UUFDaEMwRCxhQUFhLENBQUM1RCxPQUFkLENBQXNCLFVBQUFzRSxJQUFJLEVBQUk7VUFDMUJBLElBQUksQ0FBQ2pFLFNBQUwsQ0FBZW9CLE1BQWYsQ0FBc0IsUUFBdEI7UUFDSCxDQUZEO1FBR0FtQyxhQUFhLENBQUM1RCxPQUFkLENBQXNCLFVBQUFzRSxJQUFJLEVBQUk7VUFDMUIsSUFBSUQsR0FBRyxDQUFDRSxPQUFKLENBQVloQixNQUFaLEtBQXVCZSxJQUFJLENBQUNDLE9BQUwsQ0FBYUMsSUFBeEMsRUFBOEM7WUFDMUNGLElBQUksQ0FBQ2pFLFNBQUwsQ0FBZUMsR0FBZixDQUFtQixRQUFuQjtVQUNIO1FBQ0osQ0FKRDtNQUtILENBVEQ7SUFVSCxDQVhEO0VBWUgsQ0EzQkQsTUEyQk87SUFDSHVELE1BQU0sQ0FBQzdELE9BQVAsQ0FBZSxVQUFBMEIsSUFBSSxFQUFJO01BQ25CQSxJQUFJLENBQUN4QixnQkFBTCxDQUFzQixXQUF0QixFQUFtQyxZQUFNO1FBQ3JDd0IsSUFBSSxDQUFDckIsU0FBTCxDQUFlQyxHQUFmLENBQW1CLFFBQW5CO01BQ0gsQ0FGRDtNQUdBb0IsSUFBSSxDQUFDeEIsZ0JBQUwsQ0FBc0IsWUFBdEIsRUFBb0MsVUFBQ2tELENBQUQsRUFBTztRQUN2QyxJQUFJLENBQUMxQixJQUFJLENBQUM0QixRQUFMLENBQWNGLENBQUMsQ0FBQ3FCLGFBQWhCLENBQUwsRUFBcUM7VUFDakMvQyxJQUFJLENBQUNyQixTQUFMLENBQWVvQixNQUFmLENBQXNCLFFBQXRCO1VBQ0FrQyxZQUFZLENBQUMzRCxPQUFiLENBQXFCLFVBQUFxRSxHQUFHLEVBQUk7WUFDeEJBLEdBQUcsQ0FBQ2hFLFNBQUosQ0FBY29CLE1BQWQsQ0FBcUIsUUFBckI7VUFDSCxDQUZEO1VBR0FtQyxhQUFhLENBQUM1RCxPQUFkLENBQXNCLFVBQUFzRSxJQUFJLEVBQUk7WUFDMUJBLElBQUksQ0FBQ2pFLFNBQUwsQ0FBZW9CLE1BQWYsQ0FBc0IsUUFBdEI7VUFDSCxDQUZEO1FBR0g7TUFDSixDQVZEO0lBV0gsQ0FmRDtJQWdCQWtDLFlBQVksQ0FBQzNELE9BQWIsQ0FBcUIsVUFBQXFFLEdBQUcsRUFBSTtNQUN4QkEsR0FBRyxDQUFDbkUsZ0JBQUosQ0FBcUIsT0FBckIsRUFBOEIsWUFBTTtRQUNoQ3lELFlBQVksQ0FBQzNELE9BQWIsQ0FBcUIsVUFBQXFFLEdBQUcsRUFBSTtVQUN4QkEsR0FBRyxDQUFDaEUsU0FBSixDQUFjb0IsTUFBZCxDQUFxQixRQUFyQjtRQUNILENBRkQ7UUFHQW1DLGFBQWEsQ0FBQzVELE9BQWQsQ0FBc0IsVUFBQXNFLElBQUksRUFBSTtVQUMxQkEsSUFBSSxDQUFDakUsU0FBTCxDQUFlb0IsTUFBZixDQUFzQixRQUF0QjtRQUNILENBRkQ7UUFHQW1DLGFBQWEsQ0FBQzVELE9BQWQsQ0FBc0IsVUFBQXNFLElBQUksRUFBSTtVQUMxQixJQUFJRCxHQUFHLENBQUNFLE9BQUosQ0FBWWhCLE1BQVosS0FBdUJlLElBQUksQ0FBQ0MsT0FBTCxDQUFhQyxJQUF4QyxFQUE4QztZQUMxQ0YsSUFBSSxDQUFDakUsU0FBTCxDQUFlQyxHQUFmLENBQW1CLFFBQW5CO1lBQ0ErRCxHQUFHLENBQUNoRSxTQUFKLENBQWNDLEdBQWQsQ0FBa0IsUUFBbEI7VUFDSDtRQUNKLENBTEQ7TUFNSCxDQWJEO0lBY0gsQ0FmRDtFQWdCSDtBQUNKOztBQUVEakIsUUFBUSxDQUFDYSxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEM0RCxtQkFBOUM7QUFDQUMsTUFBTSxDQUFDN0QsZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0M0RCxtQkFBbEMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluZGV4XCIpKSB7XG4gICAgY29uc3Qgc3dpcGVyQWZ0ZXJIZXJvID0gbmV3IFN3aXBlcihcIi5hZnRlci1oZXJvX19jb250ZW50XCIsIHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgZWw6IFwiLmFmdGVyLWhlcm9fX3BhZ2luYXRpb25cIlxuICAgICAgICB9LFxuICAgICAgICBicmVha3BvaW50czoge1xuICAgICAgICAgICAgNzAwOiB7XG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIDE0MDA6IHtcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMjAsXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc3QgZmVlZGJhY2tJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmlucHV0LWZvcm1cIilcbiAgICBmZWVkYmFja0lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY2hlY2tGb3JDb21wbGV0aW9uKGlucHV0KVxuICAgICAgICB9KVxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4ge1xuICAgICAgICAgICAgaW5wdXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgIH0pXG4gICAgICAgIGNoZWNrRm9yQ29tcGxldGlvbihpbnB1dClcbiAgICB9KVxufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJibG9nXCIpKSB7XG4gICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmJsb2dfX2hlYWQtaXRlbVwiKVxuXG4gICAgYWN0aXZlRWxlbShlbGVtcylcblxufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhYm91dFwiKSkge1xuICAgIGNvbnN0IHN3aXBlclllYXIgPSBuZXcgU3dpcGVyKFwiLmFib3V0LWhpc3RvcnlfX3RhYi1zd2lwZXJcIiwge1xuICAgICAgICBzbGlkZXNQZXJWaWV3OiBcImF1dG9cIixcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICAgICAgZnJlZU1vZGU6IHRydWUsXG4gICAgICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgICAgICAzMjA6IHtcbiAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgNzY4OiB7XG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfSlcbiAgICBjb25zdCBzd2lwZXJIaXN0b3J5ID0gbmV3IFN3aXBlcihcIi5hYm91dC1oaXN0b3J5X19ib3R0b20tc3dpcGVyXCIsIHtcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgYWxsb3dUb3VjaE1vdmU6IGZhbHNlLFxuICAgICAgICB0aHVtYnM6IHtcbiAgICAgICAgICAgIHN3aXBlcjogc3dpcGVyWWVhclxuICAgICAgICB9LFxuICAgICAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgICAgICBuZXh0RWw6IFwiLmFib3V0LWhpc3RvcnlfX2J0bi1uZXh0XCIsXG4gICAgICAgICAgICBwcmV2RWw6IFwiLmFib3V0LWhpc3RvcnlfX2J0bi1wcmV2XCIsXG4gICAgICAgIH0sXG4gICAgfSlcblxuICAgIHltYXBzLnJlYWR5KGluaXRNYXApXG5cbiAgICBjb25zdCBmZWVkYmFja0lucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW5wdXQtZm9ybVwiKVxuICAgIGZlZWRiYWNrSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCAoKSA9PiB7XG4gICAgICAgICAgICBjaGVja0ZvckNvbXBsZXRpb24oaW5wdXQpXG4gICAgICAgIH0pXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgfSlcbiAgICAgICAgY2hlY2tGb3JDb21wbGV0aW9uKGlucHV0KVxuICAgIH0pXG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldGFpbHNcIikpIHtcbiAgICBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKFwiLmRldGFpbHMtdG9wX19zd2lwZXIyXCIsIHtcbiAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcbiAgICAgICAgc3BhY2VCZXR3ZWVuOjEwLFxuICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgICAgd2F0Y2hTbGlkZXNQcm9ncmVzczogdHJ1ZVxuICAgIH0pICBcblxuICAgIGNvbnN0IHN3aXBlcjIgPSBuZXcgU3dpcGVyKFwiLmRldGFpbHMtdG9wX19zd2lwZXJcIiwge1xuICAgICAgICBzcGFjZUJldHdlZW46IDEwLFxuICAgICAgICB0aHVtYnM6IHtcbiAgICAgICAgICAgIHN3aXBlcjogc3dpcGVyXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5mdW5jdGlvbiBjaGVja0ZvckNvbXBsZXRpb24oaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICB9XG59XG5mdW5jdGlvbiBhY3RpdmVFbGVtKGVsZW1zKSB7XG4gICAgZWxlbXMuZm9yRWFjaChlbGVtID0+IHtcbiAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgZWxlbXMuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpKVxuICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcbiAgICB2YXIgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwiYWJvdXRfX21hcFwiLCB7XG4gICAgICAgIGNlbnRlcjogWzU1Ljc5NDAyNjU2ODkyNjAyLDM3LjQ4MjY0NTQ5OTk5OTk1XSxcbiAgICAgICAgem9vbTogMTgsXG4gICAgICAgIGNvbnRyb2xzOiBbXVxuICAgIH0pXG5cbiAgICAvLyDQodC+0LfQtNCw0L3QuNC1INC80LXRgtC60Lgg0YEg0LrRgNGD0LPQu9C+0Lkg0LDQutGC0LjQstC90L7QuSDQvtCx0LvQsNGB0YLRjNGOLlxuICAgIHZhciBjaXJjbGVMYXlvdXQgPSB5bWFwcy50ZW1wbGF0ZUxheW91dEZhY3RvcnkuY3JlYXRlQ2xhc3MoYDxkaXYgY2xhc3M9XCJwbGFjZW1hcmtfbGF5b3V0X2NvbnRhaW5lclwiPlxuICAgICAgICA8c3BhbiBjbGFzcz1cImNpcmNsZV9sYXlvdXRcIj5cbiAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiMjVcIiBoZWlnaHQ9XCIzM1wiIHZpZXdCb3g9XCIwIDAgMjUgMzNcIiBmaWxsPVwibm9uZVwiPlxuICAgICAgICAgICAgICAgIDxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIzM1wiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgxKVwiIGZpbGw9XCJ3aGl0ZVwiLz5cbiAgICAgICAgICAgICAgICA8cGF0aCBkPVwiTTIzLjc5IDExLjA5NDhDMjMuNzkgMTQuMDEwNSAyMi4wODg2IDE3Ljk2MSAxOS43MDY3IDIxLjk1NTVDMTcuNDYgMjUuNzIzNSAxNC42NTkxIDI5LjQ0NzkgMTIuMjg3OCAzMi4yMzQ4QzkuNzgwOTQgMjkuMzIzOSA2Ljk3NCAyNS41OTI2IDQuNzU4NzcgMjEuODUwMkMyLjQxNzcxIDE3Ljg5NTIgMC43OTAwMzkgMTQuMDEzNSAwLjc5MDAzOSAxMS4wOTQ4QzAuNzkwMDM5IDUuMjc5NjcgNS45MDExMiAwLjUgMTIuMjkgMC41QzE4LjY3OSAwLjUgMjMuNzkgNS4yNzk2NyAyMy43OSAxMS4wOTQ4WlwiIGZpbGw9XCIjRkZEMzQxXCIgc3Ryb2tlPVwiI0ZGQ0UwMFwiLz5cbiAgICAgICAgICAgICAgICA8Y2lyY2xlIGN4PVwiMTIuMjlcIiBjeT1cIjEyXCIgcj1cIjUuNVwiIGZpbGw9XCJ3aGl0ZVwiIHN0cm9rZT1cIiNGRkNFMDBcIi8+XG4gICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9zcGFuPlxuICAgIDwvZGl2PmApO1xuICAgIHZhciBCYWxsb29uQ29udGVudExheW91dCA9IHltYXBzLnRlbXBsYXRlTGF5b3V0RmFjdG9yeS5jcmVhdGVDbGFzcyhgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoaW50X2xheW91dF9jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoaW50X2xheW91dF9jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpbnRfbGF5b3V0X2hlYWRcIj5cbiAgICAgICAgICAgICAgICAgICAge3sgcHJvcGVydGllcy5uYW1lIH19XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpbnRfbGF5b3V0X2JvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhpbnRfbGF5b3V0X2NpdHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGludF9sYXlvdXRfc3ZnXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMVwiIGhlaWdodD1cIjE0XCIgdmlld0JveD1cIjAgMCAxMSAxNFwiIGZpbGw9XCJub25lXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9XCJNOS45MTY0MSA0LjUzODAzQzkuOTE2NDEgNi45ODkwMyA3LjA4NTY0IDExLjAyNDIgNS4xMTY0MSAxMy4zMDAxQzMuMDI0MSAxMC45MTA0IDAuMzE2NDA2IDYuOTg5MDMgMC4zMTY0MDYgNC41MzgwM0MwLjMxNjQwNiAyLjA4NzAzIDIuNDY1NDQgMC4xMDAwOTggNS4xMTY0MSAwLjEwMDA5OEM3Ljc2NzM3IDAuMTAwMDk4IDkuOTE2NDEgMi4wODcwMyA5LjkxNjQxIDQuNTM4MDNaXCIgZmlsbD1cIiMyMTIwMUNcIi8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxjaXJjbGUgY3g9XCI1LjExODc1XCIgY3k9XCI0LjlcIiByPVwiMi40XCIgZmlsbD1cIndoaXRlXCIvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoaW50X2xheW91dF90ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgcHJvcGVydGllcy5jaXR5IH19ICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGludF9sYXlvdXRfYWRkcmVzcyBoaW50X2xheW91dF90ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyBwcm9wZXJ0aWVzLmFkZHJlc3MgfX0gICAgXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaGludF9sYXlvdXRfcGhvbmUgaGludF9sYXlvdXRfdGV4dFwiPlxuICAgICAgICAgICAgICAgICAgICB7eyBwcm9wZXJ0aWVzLnBob25lIH19ICAgIFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgIGBcbiAgICApXG5cblxuICAgIHZhciBjaXJjbGVQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFxuICAgICAgICBbNTUuNzk0MDI2NTY4OTI2MDIsMzcuNDgyNjQ1NDk5OTk5OTVdLCB7XG4gICAgICAgICAgICBuYW1lOiBcItCm0LXQvdGC0YDQsNC70YzQvdGL0Lkg0L7RhNC40YFcIixcbiAgICAgICAgICAgIGNpdHk6IFwi0JzQvtGB0LrQstCwXCIsXG4gICAgICAgICAgICBhZGRyZXNzOiBcItCg0KQsIDEyMzA2MCwg0JzQvtGB0LrQstCwINGD0LsuINCg0LDRgdC/0LvQtdGC0LjQvdCwLCDQtNC+0LwgNSwg0YHRgtGALjlcIixcbiAgICAgICAgICAgIHBob25lOiBcIis3ICg0OTUpIDc2MC05MS05NiBcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBiYWxsb29uQ29udGVudExheW91dDogQmFsbG9vbkNvbnRlbnRMYXlvdXQsXG4gICAgICAgICAgICBoaWRlSWNvbk9uQmFsbG9vbk9wZW46IGZhbHNlLFxuICAgICAgICAgICAgaWNvbkxheW91dDogY2lyY2xlTGF5b3V0LFxuICAgICAgICAgICAgaWNvblNoYXBlOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0NpcmNsZScsXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFswLCAwXSxcbiAgICAgICAgICAgICAgICByYWRpdXM6IDI1XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApO1xuXG4gICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQoY2lyY2xlUGxhY2VtYXJrKTtcbiAgICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZSgnZHJhZycpO1xuICAgIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XG4gICAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCdzZWFyY2hDb250cm9sJyk7XG4gICAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCd0cmFmZmljQ29udHJvbCcpO1xuICAgIG15TWFwLmNvbnRyb2xzLnJlbW92ZSgndHlwZVNlbGVjdG9yJyk7XG4gICAgbXlNYXAuY29udHJvbHMucmVtb3ZlKCdmdWxsc2NyZWVuQ29udHJvbCcpO1xuICAgIG15TWFwLmNvbnRyb2xzLnJlbW92ZSgncnVsZXJDb250cm9sJyk7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGhlYWRlclNlbGVjdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICBpZighZWxlbS5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICB9XG4gICAgfSlcbn0pXG5cbmNvbnN0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyX19idXJnZXJcIilcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fbWVudVwiKVxuY29uc3QgaGVhZGVyVGFiQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlcl9fc2VsZWN0LWxpc3QtaXRlbS1idG4nKVxuY29uc3QgaGVhZGVyVGFiTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyX19zZWxlY3QtcmlnaHQtbGlzdFwiKVxuY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXJfX3NlbGVjdFwiKVxuZnVuY3Rpb24gYXBwbHlFdmVudExpc3RlbmVycyAoKSB7XG4gICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1heC13aWR0aDogMTE1MHB4KVwiKS5tYXRjaGVzKSB7XG4gICAgICAgIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgaWYgKGJ1cmdlci5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoXCJsb2NrXCIpXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZShcImxvY2tcIilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgc2VsZWN0LmZvckVhY2goZWxlbSA9PiB7XG4gICAgICAgICAgICBlbGVtLmZpcnN0RWxlbWVudENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBoZWFkZXJUYWJCdG4uZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBoZWFkZXJUYWJMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidG4uZGF0YXNldC50YXJnZXQgPT09IGl0ZW0uZGF0YXNldC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGVjdC5mb3JFYWNoKGVsZW0gPT4ge1xuICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtLmNvbnRhaW5zKGUucmVsYXRlZFRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclRhYkJ0bi5mb3JFYWNoKGJ0biA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJUYWJMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBoZWFkZXJUYWJCdG4uZm9yRWFjaChidG4gPT4ge1xuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaGVhZGVyVGFiQnRuLmZvckVhY2goYnRuID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGhlYWRlclRhYkxpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBoZWFkZXJUYWJMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidG4uZGF0YXNldC50YXJnZXQgPT09IGl0ZW0uZGF0YXNldC5wYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGFwcGx5RXZlbnRMaXN0ZW5lcnMpXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBhcHBseUV2ZW50TGlzdGVuZXJzKSJdfQ==
